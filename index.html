
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Write Dart"
        >
    <title>Write Dart</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-35cbb975.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-7393aaf6.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;dart&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <div style="color: white; font-size: 2rem; text-align: center; padding-top: 1rem;">Write <span style="color: #0384fc;">Dart</span></div>
        <div class="lang-selector">
              <a href="#" data-language-name="dart">dart</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#45fa4e00db" class="toc-h1 toc-link" data-title="介绍">介绍</a>
          </li>
          <li>
            <a href="#class-modifiers" class="toc-h1 toc-link" data-title="Class Modifiers">Class Modifiers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#abstract-class" class="toc-h2 toc-link" data-title="abstract class">abstract class</a>
                  </li>
                  <li>
                    <a href="#base-class" class="toc-h2 toc-link" data-title="base class">base class</a>
                  </li>
                  <li>
                    <a href="#interface-class" class="toc-h2 toc-link" data-title="interface class">interface class</a>
                  </li>
                  <li>
                    <a href="#final-class" class="toc-h2 toc-link" data-title="final class">final class</a>
                  </li>
                  <li>
                    <a href="#sealed-class" class="toc-h2 toc-link" data-title="sealed class">sealed class</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#control-flow" class="toc-h1 toc-link" data-title="Control Flow">Control Flow</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#if-else" class="toc-h2 toc-link" data-title="if-else">if-else</a>
                  </li>
                  <li>
                    <a href="#if-case" class="toc-h2 toc-link" data-title="if-case">if-case</a>
                  </li>
                  <li>
                    <a href="#if-case-else" class="toc-h2 toc-link" data-title="if-case-else">if-case-else</a>
                  </li>
                  <li>
                    <a href="#switch" class="toc-h2 toc-link" data-title="switch">switch</a>
                  </li>
                  <li>
                    <a href="#switch-empty" class="toc-h2 toc-link" data-title="switch-empty">switch-empty</a>
                  </li>
                  <li>
                    <a href="#switch-stmt" class="toc-h2 toc-link" data-title="switch-stmt">switch-stmt</a>
                  </li>
                  <li>
                    <a href="#switch-exp" class="toc-h2 toc-link" data-title="switch-exp">switch-exp</a>
                  </li>
                  <li>
                    <a href="#exh-bool" class="toc-h2 toc-link" data-title="exh-bool">exh-bool</a>
                  </li>
                  <li>
                    <a href="#guard" class="toc-h2 toc-link" data-title="guard">guard</a>
                  </li>
                  <li>
                    <a href="#loop-collection" class="toc-h2 toc-link" data-title="loop collection">loop collection</a>
                  </li>
                  <li>
                    <a href="#loop-collection-for-pattern" class="toc-h2 toc-link" data-title="loop collection-for-pattern">loop collection-for-pattern</a>
                  </li>
                  <li>
                    <a href="#while" class="toc-h2 toc-link" data-title="while">while</a>
                  </li>
                  <li>
                    <a href="#do-while" class="toc-h2 toc-link" data-title="do-while">do-while</a>
                  </li>
                  <li>
                    <a href="#while-break" class="toc-h2 toc-link" data-title="while-break">while-break</a>
                  </li>
                  <li>
                    <a href="#for-continue" class="toc-h2 toc-link" data-title="for-continue">for-continue</a>
                  </li>
                  <li>
                    <a href="#where" class="toc-h2 toc-link" data-title="where">where</a>
                  </li>
                  <li>
                    <a href="#for-and-closures" class="toc-h2 toc-link" data-title="for-and-closures">for-and-closures</a>
                  </li>
                  <li>
                    <a href="#for-each" class="toc-h2 toc-link" data-title="for-each">for-each</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#patterns" class="toc-h1 toc-link" data-title="Patterns">Patterns</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#algebraic_datatypes" class="toc-h2 toc-link" data-title="algebraic_datatypes">algebraic_datatypes</a>
                  </li>
                  <li>
                    <a href="#destructuring-list-pattern" class="toc-h2 toc-link" data-title="destructuring list-pattern">destructuring list-pattern</a>
                  </li>
                  <li>
                    <a href="#destructuring-nested-pattern" class="toc-h2 toc-link" data-title="destructuring nested-pattern">destructuring nested-pattern</a>
                  </li>
                  <li>
                    <a href="#destructuring-variable-declaration" class="toc-h2 toc-link" data-title="destructuring variable-declaration">destructuring variable-declaration</a>
                  </li>
                  <li>
                    <a href="#destructuring-variable-assignment" class="toc-h2 toc-link" data-title="destructuring variable-assignment">destructuring variable-assignment</a>
                  </li>
                  <li>
                    <a href="#destructure-multiple-returns" class="toc-h2 toc-link" data-title="destructure-multiple-returns">destructure-multiple-returns</a>
                  </li>
                  <li>
                    <a href="#destructure-class-instances" class="toc-h2 toc-link" data-title="destructure-class-instances">destructure-class-instances</a>
                  </li>
                  <li>
                    <a href="#for-in-pattern-amp-for-in-pattern" class="toc-h2 toc-link" data-title="for-in-pattern &amp; for-in-pattern">for-in-pattern &amp; for-in-pattern</a>
                  </li>
                  <li>
                    <a href="#json" class="toc-h2 toc-link" data-title="json">json</a>
                  </li>
                  <li>
                    <a href="#record-syntax" class="toc-h2 toc-link" data-title="record-syntax">record-syntax</a>
                  </li>
                  <li>
                    <a href="#record-type-annotation" class="toc-h2 toc-link" data-title="record-type-annotation">record-type-annotation</a>
                  </li>
                  <li>
                    <a href="#record-type-declaration" class="toc-h2 toc-link" data-title="record-type-declaration">record-type-declaration</a>
                  </li>
                  <li>
                    <a href="#record-type-named-declaration" class="toc-h2 toc-link" data-title="record-type-named-declaration">record-type-named-declaration</a>
                  </li>
                  <li>
                    <a href="#record-type-mismatched-names" class="toc-h2 toc-link" data-title="record-type-mismatched-names">record-type-mismatched-names</a>
                  </li>
                  <li>
                    <a href="#record-type-matched-names" class="toc-h2 toc-link" data-title="record-type-matched-names">record-type-matched-names</a>
                  </li>
                  <li>
                    <a href="#record-getters-two" class="toc-h2 toc-link" data-title="record-getters-two">record-getters-two</a>
                  </li>
                  <li>
                    <a href="#record-shape" class="toc-h2 toc-link" data-title="record-shape">record-shape</a>
                  </li>
                  <li>
                    <a href="#record-shape-mismatch" class="toc-h2 toc-link" data-title="record-shape-mismatch">record-shape-mismatch</a>
                  </li>
                  <li>
                    <a href="#record-multiple-returns" class="toc-h2 toc-link" data-title="record-multiple-returns">record-multiple-returns</a>
                  </li>
                  <li>
                    <a href="#pattern_types-cast" class="toc-h2 toc-link" data-title="pattern_types cast">pattern_types cast</a>
                  </li>
                  <li>
                    <a href="#pattern_types-constant" class="toc-h2 toc-link" data-title="pattern_types constant">pattern_types constant</a>
                  </li>
                  <li>
                    <a href="#pattern_types-complex-constant" class="toc-h2 toc-link" data-title="pattern_types complex-constant">pattern_types complex-constant</a>
                  </li>
                  <li>
                    <a href="#pattern_types-match-context" class="toc-h2 toc-link" data-title="pattern_types match-context">pattern_types match-context</a>
                  </li>
                  <li>
                    <a href="#pattern_types-rest" class="toc-h2 toc-link" data-title="pattern_types rest">pattern_types rest</a>
                  </li>
                  <li>
                    <a href="#pattern_types-rest-sub" class="toc-h2 toc-link" data-title="pattern_types rest-sub">pattern_types rest-sub</a>
                  </li>
                  <li>
                    <a href="#pattern_types-logical-and" class="toc-h2 toc-link" data-title="pattern_types logical-and">pattern_types logical-and</a>
                  </li>
                  <li>
                    <a href="#pattern_types-logical-or" class="toc-h2 toc-link" data-title="pattern_types logical-or">pattern_types logical-or</a>
                  </li>
                  <li>
                    <a href="#pattern_types-share-guard" class="toc-h2 toc-link" data-title="pattern_types share-guard">pattern_types share-guard</a>
                  </li>
                  <li>
                    <a href="#pattern_types-null-assert-match" class="toc-h2 toc-link" data-title="pattern_types null-assert-match">pattern_types null-assert-match</a>
                  </li>
                  <li>
                    <a href="#pattern_types-null-assert-dec" class="toc-h2 toc-link" data-title="pattern_types null-assert-dec">pattern_types null-assert-dec</a>
                  </li>
                  <li>
                    <a href="#pattern_types-null-check" class="toc-h2 toc-link" data-title="pattern_types null-check">pattern_types null-check</a>
                  </li>
                  <li>
                    <a href="#pattern_types-object" class="toc-h2 toc-link" data-title="pattern_types object">pattern_types object</a>
                  </li>
                  <li>
                    <a href="#pattern_types-object-getter" class="toc-h2 toc-link" data-title="pattern_types object-getter">pattern_types object-getter</a>
                  </li>
                  <li>
                    <a href="#pattern_types-record" class="toc-h2 toc-link" data-title="pattern_types record">pattern_types record</a>
                  </li>
                  <li>
                    <a href="#pattern_types-record-getter" class="toc-h2 toc-link" data-title="pattern_types record-getter">pattern_types record-getter</a>
                  </li>
                  <li>
                    <a href="#pattern_types-relational" class="toc-h2 toc-link" data-title="pattern_types relational">pattern_types relational</a>
                  </li>
                  <li>
                    <a href="#pattern_types-variable" class="toc-h2 toc-link" data-title="pattern_types variable">pattern_types variable</a>
                  </li>
                  <li>
                    <a href="#pattern_types-variable-typed" class="toc-h2 toc-link" data-title="pattern_types variable-typed">pattern_types variable-typed</a>
                  </li>
                  <li>
                    <a href="#pattern_types-wildcard" class="toc-h2 toc-link" data-title="pattern_types wildcard">pattern_types wildcard</a>
                  </li>
                  <li>
                    <a href="#pattern_types-wildcard-typed" class="toc-h2 toc-link" data-title="pattern_types wildcard-typed">pattern_types wildcard-typed</a>
                  </li>
                  <li>
                    <a href="#pattern_types-parens" class="toc-h2 toc-link" data-title="pattern_types parens">pattern_types parens</a>
                  </li>
                  <li>
                    <a href="#switch-constant-pattern" class="toc-h2 toc-link" data-title="switch constant-pattern">switch constant-pattern</a>
                  </li>
                  <li>
                    <a href="#switch-list-pattern" class="toc-h2 toc-link" data-title="switch list-pattern">switch list-pattern</a>
                  </li>
                  <li>
                    <a href="#switch-statement" class="toc-h2 toc-link" data-title="switch-statement">switch-statement</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#concurrency" class="toc-h1 toc-link" data-title="Concurrency">Concurrency</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sync-read-json-file" class="toc-h2 toc-link" data-title="sync read json file">sync read json file</a>
                  </li>
                  <li>
                    <a href="#async-read-json-file" class="toc-h2 toc-link" data-title="async read json file">async read json file</a>
                  </li>
                  <li>
                    <a href="#simple_isolate_closure" class="toc-h2 toc-link" data-title="simple_isolate_closure">simple_isolate_closure</a>
                  </li>
                  <li>
                    <a href="#simple_worker_isolate" class="toc-h2 toc-link" data-title="simple_worker_isolate">simple_worker_isolate</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#extension-methods" class="toc-h1 toc-link" data-title="Extension Methods">Extension Methods</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#extension-list" class="toc-h2 toc-link" data-title="extension list">extension list</a>
                  </li>
                  <li>
                    <a href="#extension-string-amp-import-as-hide" class="toc-h2 toc-link" data-title="extension String &amp; import-as-hide">extension String &amp; import-as-hide</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#null-safety" class="toc-h1 toc-link" data-title="Null safety">Null safety</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#non_nullable_types" class="toc-h2 toc-link" data-title="non_nullable_types">non_nullable_types</a>
                  </li>
                  <li>
                    <a href="#nullable_types" class="toc-h2 toc-link" data-title="nullable_types">nullable_types</a>
                  </li>
                  <li>
                    <a href="#more_nullable_types" class="toc-h2 toc-link" data-title="more_nullable_types">more_nullable_types</a>
                  </li>
                  <li>
                    <a href="#late_keyword" class="toc-h2 toc-link" data-title="late_keyword">late_keyword</a>
                  </li>
                  <li>
                    <a href="#late_lazy" class="toc-h2 toc-link" data-title="late_lazy">late_lazy</a>
                  </li>
                  <li>
                    <a href="#late_circular_references" class="toc-h2 toc-link" data-title="late_circular_references">late_circular_references</a>
                  </li>
                  <li>
                    <a href="#promotion_exceptions" class="toc-h2 toc-link" data-title="promotion_exceptions">promotion_exceptions</a>
                  </li>
                  <li>
                    <a href="#type_promotion" class="toc-h2 toc-link" data-title="type_promotion">type_promotion</a>
                  </li>
                  <li>
                    <a href="#assertion_operator" class="toc-h2 toc-link" data-title="assertion_operator">assertion_operator</a>
                  </li>
                  <li>
                    <a href="#null_aware_operators" class="toc-h2 toc-link" data-title="null_aware_operators">null_aware_operators</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#non-promotion" class="toc-h1 toc-link" data-title="Non promotion">Non promotion</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#property_bang" class="toc-h2 toc-link" data-title="property_bang">property_bang</a>
                  </li>
                  <li>
                    <a href="#property_copy" class="toc-h2 toc-link" data-title="property_copy">property_copy</a>
                  </li>
                  <li>
                    <a href="#write_combine_ifs" class="toc-h2 toc-link" data-title="write_combine_ifs">write_combine_ifs</a>
                  </li>
                  <li>
                    <a href="#write_change_type" class="toc-h2 toc-link" data-title="write_change_type">write_change_type</a>
                  </li>
                  <li>
                    <a href="#loop" class="toc-h2 toc-link" data-title="loop">loop</a>
                  </li>
                  <li>
                    <a href="#switch-loop" class="toc-h2 toc-link" data-title="switch-loop">switch-loop</a>
                  </li>
                  <li>
                    <a href="#catch-null-check" class="toc-h2 toc-link" data-title="catch-null-check">catch-null-check</a>
                  </li>
                  <li>
                    <a href="#catch-bang" class="toc-h2 toc-link" data-title="catch-bang">catch-bang</a>
                  </li>
                  <li>
                    <a href="#subtype-variable" class="toc-h2 toc-link" data-title="subtype-variable">subtype-variable</a>
                  </li>
                  <li>
                    <a href="#subtype-redundant" class="toc-h2 toc-link" data-title="subtype-redundant">subtype-redundant</a>
                  </li>
                  <li>
                    <a href="#subtype-string" class="toc-h2 toc-link" data-title="subtype-String">subtype-String</a>
                  </li>
                  <li>
                    <a href="#local-write-capture-reorder" class="toc-h2 toc-link" data-title="local-write-capture-reorder">local-write-capture-reorder</a>
                  </li>
                  <li>
                    <a href="#local-write-capture-copy" class="toc-h2 toc-link" data-title="local-write-capture-copy">local-write-capture-copy</a>
                  </li>
                  <li>
                    <a href="#local-write-capture-bang" class="toc-h2 toc-link" data-title="local-write-capture-bang">local-write-capture-bang</a>
                  </li>
                  <li>
                    <a href="#closure-new-var" class="toc-h2 toc-link" data-title="closure-new-var">closure-new-var</a>
                  </li>
                  <li>
                    <a href="#closure-new-var2" class="toc-h2 toc-link" data-title="closure-new-var2">closure-new-var2</a>
                  </li>
                  <li>
                    <a href="#closure-write-capture" class="toc-h2 toc-link" data-title="closure-write-capture">closure-write-capture</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#type-system" class="toc-h1 toc-link" data-title="Type System">Type System</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#animal-type" class="toc-h2 toc-link" data-title="animal type">animal type</a>
                  </li>
                  <li>
                    <a href="#runtime-checks" class="toc-h2 toc-link" data-title="runtime-checks">runtime-checks</a>
                  </li>
                  <li>
                    <a href="#covariant" class="toc-h2 toc-link" data-title="covariant">covariant</a>
                  </li>
                  <li>
                    <a href="#bounded" class="toc-h2 toc-link" data-title="bounded">bounded</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-dart-2-note-unused-but-necessary" class="toc-h2 toc-link" data-title="strong_analysis dart-2-note-unused-but-necessary">strong_analysis dart-2-note-unused-but-necessary</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-opening-example" class="toc-h2 toc-link" data-title="strong_analysis opening-example">strong_analysis opening-example</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-static-analysis-enabled" class="toc-h2 toc-link" data-title="strong_analysis static-analysis-enabled">strong_analysis static-analysis-enabled</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-type-inference-orig" class="toc-h2 toc-link" data-title="strong_analysis type-inference-orig">strong_analysis type-inference-orig</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-type-inference" class="toc-h2 toc-link" data-title="strong_analysis type-inference">strong_analysis type-inference</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-local-var-type-inference-error" class="toc-h2 toc-link" data-title="strong_analysis local-var-type-inference-error">strong_analysis local-var-type-inference-error</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-local-var-type-inference-ok" class="toc-h2 toc-link" data-title="strong_analysis local-var-type-inference-ok">strong_analysis local-var-type-inference-ok</a>
                  </li>
                  <li>
                    <a href="#strong_analysis-type-arg-inference" class="toc-h2 toc-link" data-title="strong_analysis type-arg-inference">strong_analysis type-arg-inference</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-canvas-undefined" class="toc-h2 toc-link" data-title="common_fixes_analysis canvas-undefined">common_fixes_analysis canvas-undefined</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-canvas-as" class="toc-h2 toc-link" data-title="common_fixes_analysis canvas-as">common_fixes_analysis canvas-as</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-canvas-dynamic" class="toc-h2 toc-link" data-title="common_fixes_analysis canvas-dynamic">common_fixes_analysis canvas-dynamic</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-inferred-collection-types" class="toc-h2 toc-link" data-title="common_fixes_analysis inferred-collection-types">common_fixes_analysis inferred-collection-types</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-invalid-method-override" class="toc-h2 toc-link" data-title="common_fixes_analysis invalid-method-override">common_fixes_analysis invalid-method-override</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-type-arguments" class="toc-h2 toc-link" data-title="common_fixes_analysis type-arguments">common_fixes_analysis type-arguments</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-super-goes-last" class="toc-h2 toc-link" data-title="common_fixes_analysis super-goes-last">common_fixes_analysis super-goes-last</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-func-fail" class="toc-h2 toc-link" data-title="common_fixes_analysis func-fail">common_fixes_analysis func-fail</a>
                  </li>
                  <li>
                    <a href="#common_fixes_analysis-type-inf-null" class="toc-h2 toc-link" data-title="common_fixes_analysis type-inf-null">common_fixes_analysis type-inf-null</a>
                  </li>
                  <li>
                    <a href="#instantiate-to-bound-sanity" class="toc-h2 toc-link" data-title="instantiate-to-bound sanity">instantiate-to-bound sanity</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#html" class="toc-h1 toc-link" data-title="Html">Html</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#queryselector" class="toc-h2 toc-link" data-title="querySelector">querySelector</a>
                  </li>
                  <li>
                    <a href="#attributes" class="toc-h2 toc-link" data-title="attributes">attributes</a>
                  </li>
                  <li>
                    <a href="#creating-elements" class="toc-h2 toc-link" data-title="creating-elements">creating-elements</a>
                  </li>
                  <li>
                    <a href="#html-2" class="toc-h2 toc-link" data-title="html">html</a>
                  </li>
                  <li>
                    <a href="#classes-add" class="toc-h2 toc-link" data-title="classes-add">classes-add</a>
                  </li>
                  <li>
                    <a href="#set-id" class="toc-h2 toc-link" data-title="set-id">set-id</a>
                  </li>
                  <li>
                    <a href="#elem-set-cascade" class="toc-h2 toc-link" data-title="elem-set-cascade">elem-set-cascade</a>
                  </li>
                  <li>
                    <a href="#onclick" class="toc-h2 toc-link" data-title="onClick">onClick</a>
                  </li>
                  <li>
                    <a href="#target" class="toc-h2 toc-link" data-title="target">target</a>
                  </li>
                  <li>
                    <a href="#try-getstring" class="toc-h2 toc-link" data-title="try-getString">try-getString</a>
                  </li>
                  <li>
                    <a href="#new-httprequest" class="toc-h2 toc-link" data-title="new-HttpRequest">new-HttpRequest</a>
                  </li>
                  <li>
                    <a href="#href" class="toc-h2 toc-link" data-title="href">href</a>
                  </li>
                  <li>
                    <a href="#os-html" class="toc-h2 toc-link" data-title="os-html">os-html</a>
                  </li>
                  <li>
                    <a href="#request" class="toc-h2 toc-link" data-title="request">request</a>
                  </li>
                  <li>
                    <a href="#post" class="toc-h2 toc-link" data-title="POST">POST</a>
                  </li>
                  <li>
                    <a href="#websocket" class="toc-h2 toc-link" data-title="WebSocket">WebSocket</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#create-libraries" class="toc-h1 toc-link" data-title="Create Libraries">Create Libraries</a>
          </li>
          <li>
            <a href="#iterables" class="toc-h1 toc-link" data-title="Iterables">Iterables</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#any" class="toc-h2 toc-link" data-title="any">any</a>
                  </li>
                  <li>
                    <a href="#every" class="toc-h2 toc-link" data-title="every">every</a>
                  </li>
                  <li>
                    <a href="#any-every" class="toc-h2 toc-link" data-title="any-every">any-every</a>
                  </li>
                  <li>
                    <a href="#firstwhere" class="toc-h2 toc-link" data-title="firstWhere">firstWhere</a>
                  </li>
                  <li>
                    <a href="#first-where-long" class="toc-h2 toc-link" data-title="first-where-long">first-where-long</a>
                  </li>
                  <li>
                    <a href="#elementat" class="toc-h2 toc-link" data-title="elementAt">elementAt</a>
                  </li>
                  <li>
                    <a href="#map-int" class="toc-h2 toc-link" data-title="map-int">map-int</a>
                  </li>
                  <li>
                    <a href="#map-string" class="toc-h2 toc-link" data-title="map-string">map-string</a>
                  </li>
                  <li>
                    <a href="#take-while" class="toc-h2 toc-link" data-title="take-while">take-while</a>
                  </li>
                  <li>
                    <a href="#take-while-long-skipwhile" class="toc-h2 toc-link" data-title="take-while-long skipWhile">take-while-long skipWhile</a>
                  </li>
                  <li>
                    <a href="#where-2" class="toc-h2 toc-link" data-title="where">where</a>
                  </li>
                  <li>
                    <a href="#for-in" class="toc-h2 toc-link" data-title="for-in">for-in</a>
                  </li>
                  <li>
                    <a href="#first-last" class="toc-h2 toc-link" data-title="first-last">first-last</a>
                  </li>
                  <li>
                    <a href="#numbers-where" class="toc-h2 toc-link" data-title="numbers-where">numbers-where</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#function" class="toc-h1 toc-link" data-title="Function">Function</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pass-function" class="toc-h2 toc-link" data-title="pass function">pass function</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#future" class="toc-h1 toc-link" data-title="Future">Future</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#long-chain" class="toc-h2 toc-link" data-title="long-chain">long-chain</a>
                  </li>
                  <li>
                    <a href="#then-catch" class="toc-h2 toc-link" data-title="then-catch">then-catch</a>
                  </li>
                  <li>
                    <a href="#comprehensive-errors" class="toc-h2 toc-link" data-title="comprehensive-errors">comprehensive-errors</a>
                  </li>
                  <li>
                    <a href="#throws-then-catch" class="toc-h2 toc-link" data-title="throws-then-catch">throws-then-catch</a>
                  </li>
                  <li>
                    <a href="#connect-server" class="toc-h2 toc-link" data-title="connect-server">connect-server</a>
                  </li>
                  <li>
                    <a href="#future-then-amp-future-catch-error" class="toc-h2 toc-link" data-title="future-then &amp; future-catch-error">future-then &amp; future-catch-error</a>
                  </li>
                  <li>
                    <a href="#26b238cb1d" class="toc-h2 toc-link" data-title="注意事项">注意事项</a>
                  </li>
                  <li>
                    <a href="#auth-response" class="toc-h2 toc-link" data-title="auth-response">auth-response</a>
                  </li>
                  <li>
                    <a href="#early-error-handler" class="toc-h2 toc-link" data-title="early error handler">early error handler</a>
                  </li>
                  <li>
                    <a href="#when-complete" class="toc-h2 toc-link" data-title="when complete">when complete</a>
                  </li>
                  <li>
                    <a href="#sync" class="toc-h2 toc-link" data-title="sync">sync</a>
                  </li>
                  <li>
                    <a href="#delayed" class="toc-h2 toc-link" data-title="delayed">delayed</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#utils" class="toc-h1 toc-link" data-title="Utils">Utils</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#a-simple-logger" class="toc-h2 toc-link" data-title="A simple logger">A simple logger</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#async" class="toc-h1 toc-link" data-title="async">async</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#e873fcf64e" class="toc-h2 toc-link" data-title="以下三个函数有何区别？">以下三个函数有何区别？</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#questions" class="toc-h1 toc-link" data-title="Questions">Questions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#never" class="toc-h2 toc-link" data-title="Never 是什么？">Never 是什么？</a>
                  </li>
                  <li>
                    <a href="#dart-dynamic-object" class="toc-h2 toc-link" data-title="Dart 中 dynamic 和 Object 有何区别？">Dart 中 dynamic 和 Object 有何区别？</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>主页</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='45fa4e00db'>介绍</h1>
<p>此页面用以记录 Dart 学习过程中的代码片段和概念。</p>

<blockquote>
<p>Dart 打印 <code>Hello world!</code>。</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Hello world!'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<aside class="notice">
这是一个 <code>Notice</code> 示例。
</aside>

<aside class="success">
这是一个 <code>Success</code> 示例。
</aside>

<aside class="warning">
这是一个 <code>Warning</code> 示例。
</aside>
<h1 id='class-modifiers'>Class Modifiers</h1><h2 id='abstract-class'>abstract class</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Vehicle</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Error: Cannot be constructed</span>
<span class="n">Vehicle</span> <span class="n">myVehicle</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">();</span>

<span class="c1">// Can be extended</span>
<span class="kd">class</span> <span class="nc">Car</span> <span class="kd">extends</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">passengers</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// Can be implemented</span>
<span class="kd">class</span> <span class="nc">MockVehicle</span> <span class="kd">implements</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><h2 id='base-class'>base class</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">base</span> <span class="kd">class</span> <span class="nc">Vehicle</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// Can be constructed</span>
<span class="n">Vehicle</span> <span class="n">myVehicle</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">();</span>

<span class="c1">// Can be extended</span>
<span class="n">base</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="kd">extends</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">passengers</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 没有报错</span>
<span class="n">base</span> <span class="kd">class</span> <span class="nc">MockVehicle</span> <span class="kd">implements</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ERROR: Cannot be implemented</span>
<span class="n">base</span> <span class="kd">class</span> <span class="nc">MockVehicle2</span> <span class="kd">implements</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='interface-class'>interface class</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">interface</span> <span class="nc">class</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// Can be constructed</span>
<span class="n">Vehicle</span> <span class="n">myVehicle</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">();</span>

<span class="c1">// ERROR: Cannot be inherited - 没有报错</span>
<span class="kd">class</span> <span class="nc">Car</span> <span class="kd">extends</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">passengers</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Can be implemented</span>
<span class="kd">class</span> <span class="nc">MockVehicle</span> <span class="kd">implements</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><h2 id='final-class'>final class</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Vehicle</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// Can be constructed</span>
<span class="n">Vehicle</span> <span class="n">myVehicle</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">();</span>

<span class="c1">// ERROR: Cannot be inherited</span>
<span class="kd">class</span> <span class="nc">Car</span> <span class="kd">extends</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">passengers</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">MockVehicle</span> <span class="kd">implements</span> <span class="n">Vehicle</span> <span class="p">{</span>
  <span class="c1">// ERROR: Cannot be implemented</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">moveForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">meters</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><h2 id='sealed-class'>sealed class</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Vehicle</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Car</span> <span class="kd">extends</span> <span class="n">Vehicle</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Truck</span> <span class="kd">implements</span> <span class="n">Vehicle</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Bicycle</span> <span class="kd">extends</span> <span class="n">Vehicle</span> <span class="p">{}</span>

<span class="c1">// ERROR: Cannot be instantiated</span>
<span class="n">Vehicle</span> <span class="n">myVehicle</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">();</span>

<span class="c1">// Subclasses can be instantiated</span>
<span class="n">Vehicle</span> <span class="n">myCar</span> <span class="o">=</span> <span class="n">Car</span><span class="p">();</span>

<span class="kt">String</span> <span class="nf">getVehicleSound</span><span class="p">(</span><span class="n">Vehicle</span> <span class="n">vehicle</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ERROR: The switch is missing the</span>
  <span class="c1">// Bicycle subtype or a default case.</span>
  <span class="k">return</span> <span class="k">switch</span> <span class="p">(</span><span class="n">vehicle</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Car</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'vroom'</span><span class="p">,</span>
    <span class="n">Truck</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'VROOOOMM'</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h1 id='control-flow'>Control Flow</h1><h2 id='if-else'>if-else</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">isRaining</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">isSnowing</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kd">dynamic</span> <span class="n">car</span><span class="p">,</span> <span class="n">you</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">isRaining</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">you</span><span class="o">.</span><span class="na">bringRainCoat</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isSnowing</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">you</span><span class="o">.</span><span class="na">wearJacket</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">car</span><span class="o">.</span><span class="na">putTopDown</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='if-case'>if-case</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Point</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>

  <span class="n">Point</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span><span class="p">,</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Point</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">pair</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">pair</span> <span class="k">case</span> <span class="p">[</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">])</span> <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='if-case-else'>if-case-else</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">pair</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">pair</span> <span class="k">case</span> <span class="p">[</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">])</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Was coordinate array </span><span class="si">$x</span><span class="s">,</span><span class="si">$y</span><span class="s">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">FormatException</span><span class="p">(</span><span class="s">'Invalid coordinates.'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch'>switch</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">executeClosed</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executePending</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeApproved</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeDenied</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeOpen</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeUnknown</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeNowClosed</span><span class="p">()</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">command</span> <span class="o">=</span> <span class="s">'OPEN'</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s">'CLOSED'</span><span class="o">:</span>
      <span class="n">executeClosed</span><span class="p">();</span>
    <span class="k">case</span> <span class="s">'PENDING'</span><span class="o">:</span>
      <span class="n">executePending</span><span class="p">();</span>
    <span class="k">case</span> <span class="s">'APPROVED'</span><span class="o">:</span>
      <span class="n">executeApproved</span><span class="p">();</span>
    <span class="k">case</span> <span class="s">'DENIED'</span><span class="o">:</span>
      <span class="n">executeDenied</span><span class="p">();</span>
    <span class="k">case</span> <span class="s">'OPEN'</span><span class="o">:</span>
      <span class="n">executeOpen</span><span class="p">();</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">executeUnknown</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-empty'>switch-empty</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">executeClosed</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeOpen</span><span class="p">()</span> <span class="p">{}</span>
<span class="kt">void</span> <span class="nf">executeNowClosed</span><span class="p">()</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">command</span> <span class="o">=</span> <span class="s">'OPEN'</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="s">'OPEN'</span><span class="o">:</span>
      <span class="n">executeOpen</span><span class="p">();</span>
      <span class="k">continue</span> <span class="n">newCase</span><span class="p">;</span> <span class="c1">// Continues executing at the newCase label.</span>

    <span class="k">case</span> <span class="s">'DENIED'</span><span class="o">:</span> <span class="c1">// Empty case falls through.</span>
    <span class="k">case</span> <span class="s">'CLOSED'</span><span class="o">:</span>
      <span class="n">executeClosed</span><span class="p">();</span> <span class="c1">// Runs for both DENIED and CLOSED,</span>

    <span class="nl">newCase:</span>
    <span class="k">case</span> <span class="s">'PENDING'</span><span class="o">:</span>
      <span class="n">executeNowClosed</span><span class="p">();</span> <span class="c1">// Runs for both OPEN and PENDING.</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-stmt'>switch-stmt</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">dynamic</span> <span class="n">charCode</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">slash</span> <span class="o">=</span> <span class="s">'/'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">star</span> <span class="o">=</span> <span class="s">'*'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">plus</span> <span class="o">=</span> <span class="s">'+'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">minus</span> <span class="o">=</span> <span class="s">'-'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">comma</span> <span class="o">=</span> <span class="s">','</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">semicolon</span> <span class="o">=</span> <span class="s">','</span><span class="p">;</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">digit0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">digit9</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
<span class="kt">Object</span><span class="o">?</span> <span class="n">token</span><span class="p">;</span>

<span class="kd">dynamic</span> <span class="nf">operator</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
<span class="kd">dynamic</span> <span class="nf">punctuation</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
<span class="kd">dynamic</span> <span class="nf">number</span><span class="p">()</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Where slash, star, comma, semicolon, etc., are constant variables...</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">charCode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">slash</span> <span class="o">||</span> <span class="n">star</span> <span class="o">||</span> <span class="n">plus</span> <span class="o">||</span> <span class="nl">minus:</span> <span class="c1">// Logical-or pattern</span>
      <span class="n">token</span> <span class="o">=</span> <span class="kd">operator</span><span class="p">(</span><span class="n">charCode</span><span class="p">);</span>
    <span class="k">case</span> <span class="n">comma</span> <span class="o">||</span> <span class="nl">semicolon:</span> <span class="c1">// Logical-or pattern</span>
      <span class="n">token</span> <span class="o">=</span> <span class="n">punctuation</span><span class="p">(</span><span class="n">charCode</span><span class="p">);</span>
    <span class="k">case</span> <span class="p">&gt;</span><span class="o">=</span> <span class="n">digit0</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="o">=</span> <span class="nl">digit9:</span> <span class="c1">// Relational and logical-and patterns</span>
      <span class="n">token</span> <span class="o">=</span> <span class="n">number</span><span class="p">();</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">throw</span> <span class="n">FormatException</span><span class="p">(</span><span class="s">'Invalid'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-exp'>switch-exp</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">dynamic</span> <span class="n">charCode</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">slash</span> <span class="o">=</span> <span class="s">'/'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">star</span> <span class="o">=</span> <span class="s">'*'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">plus</span> <span class="o">=</span> <span class="s">'+'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">minus</span> <span class="o">=</span> <span class="s">'-'</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">comma</span> <span class="o">=</span> <span class="s">','</span><span class="p">;</span>
<span class="kd">const</span> <span class="n">semicolon</span> <span class="o">=</span> <span class="s">','</span><span class="p">;</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">digit0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">digit9</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
<span class="kt">Object</span><span class="o">?</span> <span class="n">token</span><span class="p">;</span>

<span class="kd">dynamic</span> <span class="nf">operator</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
<span class="kd">dynamic</span> <span class="nf">punctuation</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
<span class="kd">dynamic</span> <span class="nf">number</span><span class="p">()</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">token</span> <span class="o">=</span> <span class="k">switch</span> <span class="p">(</span><span class="n">charCode</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">slash</span> <span class="o">||</span> <span class="n">star</span> <span class="o">||</span> <span class="n">plus</span> <span class="o">||</span> <span class="n">minus</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kd">operator</span><span class="p">(</span><span class="n">charCode</span><span class="p">),</span>
    <span class="n">comma</span> <span class="o">||</span> <span class="n">semicolon</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">punctuation</span><span class="p">(</span><span class="n">charCode</span><span class="p">),</span>
    <span class="p">&gt;</span><span class="o">=</span> <span class="n">digit0</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="o">=</span> <span class="n">digit9</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span><span class="p">(),</span>
    <span class="n">_</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">FormatException</span><span class="p">(</span><span class="s">'Invalid'</span><span class="p">)</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h2 id='exh-bool'>exh-bool</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">bool</span><span class="o">?</span> <span class="n">nullableBool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="c1">// Non-exhaustive switch on bool?, missing case to match null possibility:</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">nullableBool</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kc">true</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'yes'</span><span class="p">);</span>
    <span class="k">case</span> <span class="kc">false</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'no'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='guard'>guard</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">pair</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">];</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="n">when</span> <span class="n">a</span> <span class="p">&gt;</span> <span class="nl">b:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'First element greater'</span><span class="p">);</span>
    <span class="k">case</span> <span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'First element not greater'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='loop-collection'>loop collection</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Candidate</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">''</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">yearsExperience</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kt">void</span> <span class="n">interview</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">final</span> <span class="n">candidates</span> <span class="o">=</span> <span class="p">&lt;</span><span class="n">Candidate</span><span class="p">&gt;[];</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">candidate</span> <span class="k">in</span> <span class="n">candidates</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">candidate</span><span class="o">.</span><span class="na">interview</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='loop-collection-for-pattern'>loop collection-for-pattern</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Candidate</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">''</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">yearsExperience</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kt">void</span> <span class="n">interview</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">final</span> <span class="n">candidates</span> <span class="o">=</span> <span class="p">&lt;</span><span class="n">Candidate</span><span class="p">&gt;[];</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">Candidate</span><span class="p">(</span><span class="o">:</span><span class="n">name</span><span class="p">,</span> <span class="o">:</span><span class="n">yearsExperience</span><span class="p">)</span> <span class="k">in</span> <span class="n">candidates</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$name</span><span class="s"> has </span><span class="si">$yearsExperience</span><span class="s"> of experience.'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='while'>while</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">isDone</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">doSomething</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">isDone</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">doSomething</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='do-while'>do-while</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">atEndOfPage</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">printLine</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="n">printLine</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">atEndOfPage</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div><h2 id='while-break'>while-break</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">shutDownRequested</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">processIncomingRequests</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">shutDownRequested</span><span class="p">())</span> <span class="k">break</span><span class="p">;</span>
    <span class="n">processIncomingRequests</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='for-continue'>for-continue</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Candidate</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">''</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">yearsExperience</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kt">void</span> <span class="n">interview</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">candidates</span> <span class="o">=</span> <span class="p">&lt;</span><span class="n">Candidate</span><span class="p">&gt;[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">candidates</span><span class="o">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="n">candidate</span> <span class="o">=</span> <span class="n">candidates</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="na">yearsExperience</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">candidate</span><span class="o">.</span><span class="na">interview</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='where'>where</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Candidate</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">''</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">yearsExperience</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kt">void</span> <span class="n">interview</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">candidates</span> <span class="o">=</span> <span class="p">&lt;</span><span class="n">Candidate</span><span class="p">&gt;[];</span>
  <span class="n">candidates</span>
      <span class="o">.</span><span class="na">where</span><span class="p">((</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">c</span><span class="o">.</span><span class="na">yearsExperience</span> <span class="p">&gt;</span><span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
      <span class="o">.</span><span class="na">forEach</span><span class="p">((</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">c</span><span class="o">.</span><span class="na">interview</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div><h2 id='for-and-closures'>for-and-closures</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">callbacks</span><span class="o">.</span><span class="na">add</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">callback</span> <span class="k">in</span> <span class="n">callbacks</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">callback</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='for-each'>for-each</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">collection</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="n">collection</span><span class="o">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">print</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h1 id='patterns'>Patterns</h1><h2 id='algebraic_datatypes'>algebraic_datatypes</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:math'</span> <span class="k">as</span> <span class="n">math</span><span class="o">;</span>

<span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Shape</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Square</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">length</span><span class="p">;</span>
  <span class="n">Square</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">length</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">radius</span><span class="p">;</span>
  <span class="n">Circle</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">radius</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">calculateArea</span><span class="p">(</span><span class="n">Shape</span> <span class="n">shape</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">switch</span> <span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Square</span><span class="p">(</span><span class="nl">length:</span> <span class="kd">var</span> <span class="n">l</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">l</span> <span class="o">*</span> <span class="n">l</span><span class="p">,</span>
  <span class="n">Circle</span><span class="p">(</span><span class="nl">radius:</span> <span class="kd">var</span> <span class="n">r</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">math</span><span class="o">.</span><span class="na">pi</span> <span class="o">*</span> <span class="n">r</span> <span class="o">*</span> <span class="n">r</span>
<span class="p">};</span>
</code></pre></div><h2 id='destructuring-list-pattern'>destructuring list-pattern</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">numList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="c1">// List pattern [a, b, c] destructures the three elements from numList...</span>
  <span class="kd">var</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">numList</span><span class="p">;</span>
  <span class="c1">// ...and assigns them to new variables.</span>
  <span class="n">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">);</span> <span class="c1">// 6</span>
<span class="p">}</span>
</code></pre></div><h2 id='destructuring-nested-pattern'>destructuring nested-pattern</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">list</span> <span class="o">=</span> <span class="p">[</span><span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">];</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">list</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">[</span><span class="s">'a'</span> <span class="o">||</span> <span class="s">'b'</span><span class="p">,</span> <span class="kd">var</span> <span class="n">c</span><span class="p">]</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='destructuring-variable-declaration'>destructuring variable-declaration</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Declares new variables a, b, and c.</span>
  <span class="kd">var</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span><span class="s">'str'</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div><h2 id='destructuring-variable-assignment'>destructuring variable-assignment</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="s">'left'</span><span class="p">,</span> <span class="s">'right'</span><span class="p">);</span>
  <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span> <span class="c1">// Swap.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$a</span><span class="s"> </span><span class="si">$b</span><span class="s">'</span><span class="p">);</span> <span class="c1">// Prints "right left".</span>
<span class="p">}</span>
</code></pre></div><h2 id='destructure-multiple-returns'>destructure-multiple-returns</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">userInfo</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">json</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="s">'doug'</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="n">json</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;{};</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">info</span> <span class="o">=</span> <span class="n">userInfo</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
  <span class="kd">var</span> <span class="n">name</span> <span class="o">=</span> <span class="n">info</span><span class="p">.</span><span class="err">$</span><span class="mi">1</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">age</span> <span class="o">=</span> <span class="n">info</span><span class="p">.</span><span class="err">$</span><span class="mi">2</span><span class="p">;</span>
  <span class="kd">var</span> <span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">age1</span><span class="p">)</span> <span class="o">=</span> <span class="n">userInfo</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='destructure-class-instances'>destructure-class-instances</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">one</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">two</span><span class="p">;</span>

  <span class="n">Foo</span><span class="p">({</span><span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">one</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">two</span><span class="p">});</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">Foo</span> <span class="n">myFoo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="nl">one:</span> <span class="s">'one'</span><span class="p">,</span> <span class="nl">two:</span> <span class="mi">2</span><span class="p">);</span>
  <span class="kd">var</span> <span class="n">Foo</span><span class="p">(</span><span class="o">:</span><span class="n">one</span><span class="p">,</span><span class="o">:</span><span class="n">two</span><span class="p">)</span> <span class="o">=</span> <span class="n">myFoo</span><span class="p">;</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'one </span><span class="si">$one</span><span class="s">, two </span><span class="si">$two</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='for-in-pattern-amp-for-in-pattern'>for-in-pattern &amp; for-in-pattern</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">hist</span> <span class="o">=</span> <span class="p">{</span><span class="s">'a'</span><span class="o">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s">'b'</span><span class="o">:</span> <span class="mi">100</span><span class="p">};</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">MapEntry</span><span class="p">(</span><span class="nl">key:</span> <span class="n">key</span><span class="p">,</span> <span class="nl">value:</span> <span class="n">count</span><span class="p">)</span> <span class="k">in</span> <span class="n">hist</span><span class="o">.</span><span class="na">entries</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$key</span><span class="s"> occurred </span><span class="si">$count</span><span class="s"> times'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="n">MapEntry</span><span class="p">(</span><span class="o">:</span><span class="n">key</span><span class="p">,</span> <span class="nl">value:</span> <span class="n">count</span><span class="p">)</span> <span class="k">in</span> <span class="n">hist</span><span class="o">.</span><span class="na">entries</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$key</span><span class="s"> occurred </span><span class="si">$count</span><span class="s"> times'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='json'>json</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'user'</span><span class="o">:</span> <span class="p">[</span><span class="s">'Lily'</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="p">{</span><span class="s">'user'</span><span class="o">:</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">]}</span> <span class="o">=</span> <span class="n">json</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">json</span> <span class="k">is</span> <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">Object</span><span class="o">?</span><span class="p">&gt;</span> <span class="o">&amp;&amp;</span>
      <span class="n">json</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span>
      <span class="n">json</span><span class="o">.</span><span class="na">containsKey</span><span class="p">(</span><span class="s">'user'</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="n">user</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">'user'</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">user</span> <span class="k">is</span> <span class="kt">List</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="o">&amp;&amp;</span>
        <span class="n">user</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span>
        <span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">is</span> <span class="kt">String</span> <span class="o">&amp;&amp;</span>
        <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">is</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="n">name</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">as</span> <span class="kt">String</span><span class="p">;</span>
      <span class="kd">var</span> <span class="n">age</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">as</span> <span class="kt">int</span><span class="p">;</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'User </span><span class="si">$name</span><span class="s"> is </span><span class="si">$age</span><span class="s"> years old.'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">json</span> <span class="k">case</span> <span class="p">{</span><span class="s">'user'</span><span class="o">:</span> <span class="p">[</span><span class="kt">String</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age</span><span class="p">]})</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'User </span><span class="si">$name</span><span class="s"> is </span><span class="si">$age</span><span class="s"> years old.'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-syntax'>record-syntax</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">record</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first'</span><span class="p">,</span> <span class="nl">a:</span> <span class="mi">2</span><span class="p">,</span> <span class="nl">b:</span> <span class="kc">true</span><span class="p">,</span> <span class="s">'last'</span><span class="p">);</span>
  <span class="c1">// record-getters</span>
  <span class="n">print</span><span class="p">(</span><span class="n">record</span><span class="p">.</span><span class="err">$</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// first</span>
  <span class="n">print</span><span class="p">(</span><span class="n">record</span><span class="p">.</span><span class="err">$</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// last</span>
  <span class="n">print</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="na">a</span><span class="p">);</span> <span class="c1">// 2</span>
  <span class="n">print</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="na">b</span><span class="p">);</span> <span class="c1">// true</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-type-annotation'>record-type-annotation</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">swap</span><span class="p">((</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">record</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="n">record</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">print</span><span class="p">(</span><span class="n">swap</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span> <span class="c1">// (2, 1)</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-type-declaration'>record-type-declaration</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Record type annotation in a variable declaration:</span>
  <span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">record</span><span class="p">;</span>
  <span class="c1">// Initialize it with a record expression:</span>
  <span class="n">record</span> <span class="o">=</span> <span class="p">(</span><span class="s">'A string'</span><span class="p">,</span> <span class="mi">123</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-type-named-declaration'>record-type-named-declaration</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Record type annotation in a variable declaration:</span>
  <span class="p">({</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">b</span><span class="p">})</span> <span class="n">record</span><span class="p">;</span>
  <span class="c1">// Initialize it with a record expression:</span>
  <span class="n">record</span> <span class="o">=</span> <span class="p">(</span><span class="nl">a:</span> <span class="mi">123</span><span class="p">,</span> <span class="nl">b:</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-type-mismatched-names'>record-type-mismatched-names</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">({</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">})</span> <span class="n">recordAB</span> <span class="o">=</span> <span class="p">(</span><span class="nl">a:</span> <span class="mi">1</span><span class="p">,</span> <span class="nl">b:</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">({</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">})</span> <span class="n">recordXY</span> <span class="o">=</span> <span class="p">(</span><span class="nl">x:</span> <span class="mi">3</span><span class="p">,</span> <span class="nl">y:</span> <span class="mi">4</span><span class="p">);</span>
  <span class="c1">// Compile error! These records don't have the same type.</span>
  <span class="c1">// recordAB = recordXY;</span>
  <span class="n">recordAB</span><span class="p">;</span>
  <span class="n">recordXY</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-type-matched-names'>record-type-matched-names</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="n">recordAB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="n">recordXY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
  <span class="n">recordAB</span> <span class="o">=</span> <span class="n">recordXY</span><span class="p">;</span> <span class="c1">// OK.</span>
  <span class="n">recordAB</span><span class="p">;</span>
  <span class="n">recordXY</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-getters-two'>record-getters-two</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">num</span><span class="p">,</span> <span class="kt">Object</span><span class="p">)</span> <span class="n">pair</span> <span class="o">=</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s">'a'</span><span class="p">);</span>
  <span class="c1">// Static type `num`, runtime type `int`.</span>
  <span class="kd">var</span> <span class="n">first</span> <span class="o">=</span> <span class="n">pair</span><span class="p">.</span><span class="err">$</span><span class="mi">1</span><span class="p">;</span>
  <span class="c1">// Static type `Object`, runtime type `String`.</span>
  <span class="kd">var</span> <span class="n">second</span> <span class="o">=</span> <span class="n">pair</span><span class="p">.</span><span class="err">$</span><span class="mi">2</span><span class="p">;</span>
  <span class="n">first</span><span class="p">;</span>
  <span class="n">second</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-shape'>record-shape</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">z</span><span class="p">)</span> <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
  <span class="p">(</span><span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="kt">int</span> <span class="n">g</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">point</span> <span class="o">==</span> <span class="n">color</span><span class="p">);</span> <span class="c1">// true</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-shape-mismatch'>record-shape-mismatch</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">({</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">z</span><span class="p">})</span> <span class="n">point</span> <span class="o">=</span> <span class="p">(</span><span class="nl">x:</span> <span class="mi">1</span><span class="p">,</span> <span class="nl">y:</span> <span class="mi">2</span><span class="p">,</span> <span class="nl">z:</span> <span class="mi">3</span><span class="p">);</span>
  <span class="p">({</span><span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="kt">int</span> <span class="n">g</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">})</span> <span class="n">color</span> <span class="o">=</span> <span class="p">(</span><span class="nl">r:</span> <span class="mi">1</span><span class="p">,</span> <span class="nl">g:</span> <span class="mi">2</span><span class="p">,</span> <span class="nl">b:</span> <span class="mi">3</span><span class="p">);</span>
  <span class="c1">// Prints 'false'. Lint: Equals on unrelated types.</span>
  <span class="n">print</span><span class="p">(</span><span class="n">point</span> <span class="o">==</span> <span class="n">color</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='record-multiple-returns'>record-multiple-returns</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="n">userInfo</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">json</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span> <span class="k">as</span> <span class="kt">String</span><span class="p">,</span> <span class="n">json</span><span class="p">[</span><span class="s">'age'</span><span class="p">]</span> <span class="k">as</span> <span class="kt">int</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">final</span> <span class="n">json</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;{</span>
    <span class="s">'name'</span><span class="o">:</span> <span class="s">'Dash'</span><span class="p">,</span>
    <span class="s">'age'</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s">'color'</span><span class="o">:</span> <span class="s">'blue'</span><span class="p">,</span>
  <span class="p">};</span>
  <span class="c1">// Destructures using a record pattern:</span>
  <span class="kd">var</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="o">=</span> <span class="n">userInfo</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
  <span class="cm">/* Equivalent to:
    var info = userInfo(json);
    var name = info.$1;
    var age  = info.$2;
  */</span>
  <span class="n">print</span><span class="p">(</span><span class="n">name</span><span class="p">);</span> <span class="c1">// Dash</span>
  <span class="n">print</span><span class="p">(</span><span class="n">age</span><span class="p">);</span> <span class="c1">// 10</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-cast'>pattern_types cast</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">num</span><span class="p">,</span> <span class="kt">Object</span><span class="p">)</span> <span class="n">record</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">'s'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="p">(</span><span class="n">i</span> <span class="k">as</span> <span class="kt">int</span><span class="p">,</span> <span class="n">s</span> <span class="k">as</span> <span class="kt">String</span><span class="p">)</span> <span class="o">=</span> <span class="n">record</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-constant'>pattern_types constant</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Matches if 1 == number.</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-complex-constant'>pattern_types complex-constant</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="p">{</span>
    <span class="c1">// List or map pattern:</span>
    <span class="k">case</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span><span class="o">:</span> <span class="c1">// ...</span>

    <span class="c1">// List or map literal:</span>
    <span class="k">case</span> <span class="kd">const</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-match-context'>pattern_types match-context</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">c:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'match </span><span class="si">$c</span><span class="s">'</span><span class="p">);</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'no match'</span><span class="p">);</span> <span class="c1">// Prints "no match".</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-rest'>pattern_types rest</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">...,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">];</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$a</span><span class="s"> </span><span class="si">$b</span><span class="s"> </span><span class="si">$c</span><span class="s"> </span><span class="si">$d</span><span class="s">'</span><span class="p">);</span> <span class="c1">// Prints "1 2 6 7".</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-rest-sub'>pattern_types rest-sub</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="p">..</span><span class="o">.</span><span class="na">rest</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">];</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$a</span><span class="s"> </span><span class="si">$b</span><span class="s"> </span><span class="si">$rest</span><span class="s"> </span><span class="si">$c</span><span class="s"> </span><span class="si">$d</span><span class="s">'</span><span class="p">);</span> <span class="c1">// Prints "1 2 [3, 4, 5] 6 7".</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-logical-and'>pattern_types logical-and</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Error, both subpatterns attempt to bind 'b'.</span>
    <span class="k">case</span> <span class="p">(</span><span class="kd">var</span> <span class="n">a</span><span class="p">,</span> <span class="kd">var</span> <span class="n">b</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="kd">var</span> <span class="n">b</span><span class="p">,</span> <span class="kd">var</span> <span class="n">c</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-logical-or'>pattern_types logical-or</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Color</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">red</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">yellow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">blue</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="na">red</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">isPrimary</span> <span class="o">=</span> <span class="k">switch</span> <span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Color</span><span class="o">.</span><span class="na">red</span> <span class="o">||</span> <span class="n">Color</span><span class="o">.</span><span class="na">yellow</span> <span class="o">||</span> <span class="n">Color</span><span class="o">.</span><span class="na">blue</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">_</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">false</span>
  <span class="p">};</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$isPrimary</span><span class="s">'</span><span class="p">);</span> <span class="c1">// true</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-share-guard'>pattern_types share-guard</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Shape</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Square</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">size</span><span class="p">;</span>
  <span class="n">Square</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">size</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">size</span><span class="p">;</span>
  <span class="n">Circle</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">size</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">Square</span><span class="p">(</span><span class="nl">size:</span> <span class="kd">var</span> <span class="n">s</span><span class="p">)</span> <span class="o">||</span> <span class="n">Circle</span><span class="p">(</span><span class="nl">size:</span> <span class="kd">var</span> <span class="n">s</span><span class="p">)</span> <span class="n">when</span> <span class="n">s</span> <span class="p">&gt;</span> <span class="mi">0</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'Non-empty symmetric shape'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-null-assert-match'>pattern_types null-assert-match</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="o">?</span><span class="p">&gt;</span> <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="s">'user'</span><span class="p">,</span> <span class="kc">null</span><span class="p">];</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">[</span><span class="s">'user'</span><span class="p">,</span> <span class="kd">var</span> <span class="n">name</span><span class="o">!</span><span class="p">]</span><span class="o">:</span>
    <span class="c1">// 'name' is a non-nullable string here.</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-null-assert-dec'>pattern_types null-assert-dec</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">(</span><span class="kt">int</span><span class="o">?</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span><span class="p">)</span> <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
  <span class="kd">var</span> <span class="p">(</span><span class="n">x</span><span class="o">!</span><span class="p">,</span> <span class="n">y</span><span class="o">!</span><span class="p">)</span> <span class="o">=</span> <span class="n">position</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-null-check'>pattern_types null-check</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">String</span><span class="o">?</span> <span class="n">maybeString</span> <span class="o">=</span> <span class="s">'nullable with base type String'</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">maybeString</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kd">var</span> <span class="n">s</span><span class="o">?:</span>
    <span class="c1">// 's' has type non-nullable String here.</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-object'>pattern_types object</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">sealed</span> <span class="kd">class</span> <span class="nc">Shape</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Square</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">size</span><span class="p">;</span>
  <span class="n">Square</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">size</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">size</span><span class="p">;</span>
  <span class="n">Circle</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">size</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Rect</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">width</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">height</span><span class="p">;</span>
  <span class="n">Rect</span><span class="p">({</span><span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">width</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="p">});</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Matches if shape is of type Rect,</span>
    <span class="c1">// and then against the properties of Rect.</span>
    <span class="k">case</span> <span class="n">Rect</span><span class="p">(</span><span class="nl">width:</span> <span class="kd">var</span> <span class="n">w</span><span class="p">,</span> <span class="nl">height:</span> <span class="kd">var</span> <span class="n">h</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-object-getter'>pattern_types object-getter</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Point</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">int</span><span class="o">?</span> <span class="n">x</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">int</span><span class="o">?</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">Point</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span><span class="p">,</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Binds new variables x and y to the</span>
  <span class="c1">// values of Point's x and y properties.</span>
  <span class="kd">var</span> <span class="n">Point</span><span class="p">(</span><span class="o">:</span><span class="n">x</span><span class="p">,</span> <span class="o">:</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-record'>pattern_types record</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="p">(</span><span class="nl">myString:</span> <span class="n">foo</span><span class="p">,</span> <span class="nl">myNumber:</span> <span class="n">bar</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nl">myString:</span> <span class="s">'string'</span><span class="p">,</span> <span class="nl">myNumber:</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-record-getter'>pattern_types record-getter</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">record</span> <span class="o">=</span> <span class="p">(</span><span class="nl">untyped:</span> <span class="s">'1'</span><span class="p">,</span> <span class="nl">typed:</span> <span class="mi">2</span><span class="p">);</span>
  <span class="c1">// Record pattern with variable subpatterns:</span>
  <span class="kd">var</span> <span class="p">(</span><span class="nl">untyped:</span> <span class="n">untyped</span><span class="p">,</span> <span class="nl">typed:</span> <span class="kt">int</span> <span class="n">typed</span><span class="p">)</span> <span class="o">=</span> <span class="n">record</span><span class="p">;</span>
  <span class="kd">var</span> <span class="p">(</span><span class="o">:</span><span class="n">untyped1</span><span class="p">,</span> <span class="o">:</span><span class="kt">int</span> <span class="n">typed1</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nl">untyped1:</span> <span class="s">'1'</span><span class="p">,</span> <span class="nl">typed1:</span> <span class="mi">2</span><span class="p">);</span>

  <span class="k">switch</span> <span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">(</span><span class="nl">untyped:</span> <span class="kd">var</span> <span class="n">untyped</span><span class="p">,</span> <span class="nl">typed:</span> <span class="kt">int</span> <span class="n">typed</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
    <span class="k">case</span> <span class="p">(</span><span class="o">:</span><span class="kd">var</span> <span class="n">untyped</span><span class="p">,</span> <span class="o">:</span><span class="kt">int</span> <span class="n">typed</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>

  <span class="c1">// Record pattern with null-check and null-assert subpatterns:</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">(</span><span class="nl">checked:</span> <span class="kd">var</span> <span class="n">checked</span><span class="o">?</span><span class="p">,</span> <span class="nl">asserted:</span> <span class="kd">var</span> <span class="n">asserted</span><span class="o">!</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
    <span class="k">case</span> <span class="p">(</span><span class="o">:</span><span class="kd">var</span> <span class="n">checked</span><span class="o">?</span><span class="p">,</span> <span class="o">:</span><span class="kd">var</span> <span class="n">asserted</span><span class="o">!</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>

  <span class="c1">// Record pattern wih cast subpattern:</span>
  <span class="kd">var</span> <span class="p">(</span><span class="nl">untyped:</span> <span class="n">untyped2</span> <span class="k">as</span> <span class="kt">int</span><span class="p">,</span> <span class="nl">typed:</span> <span class="n">typed2</span> <span class="k">as</span> <span class="kt">String</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nl">untyped:</span> <span class="s">'1'</span><span class="p">,</span> <span class="nl">typed:</span> <span class="mi">2</span><span class="p">);</span>
  <span class="kd">var</span> <span class="p">(</span><span class="o">:</span><span class="n">untyped3</span> <span class="k">as</span> <span class="kt">int</span><span class="p">,</span> <span class="o">:</span><span class="n">typed3</span> <span class="k">as</span> <span class="kt">String</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="nl">untyped3:</span> <span class="s">'1'</span><span class="p">,</span> <span class="nl">typed3:</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-relational'>pattern_types relational</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">asciiCharType</span><span class="p">(</span><span class="kt">int</span> <span class="n">char</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="n">space</span> <span class="o">=</span> <span class="mi">32</span><span class="p">;</span>
    <span class="kd">const</span> <span class="n">zero</span> <span class="o">=</span> <span class="mi">48</span><span class="p">;</span>
    <span class="kd">const</span> <span class="n">nine</span> <span class="o">=</span> <span class="mi">57</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">switch</span> <span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">&lt;</span> <span class="n">space</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'control'</span><span class="p">,</span>
      <span class="o">==</span> <span class="n">space</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'space'</span><span class="p">,</span>
      <span class="p">&gt;</span> <span class="n">space</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span> <span class="n">zero</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'punctuation'</span><span class="p">,</span>
      <span class="p">&gt;</span><span class="o">=</span> <span class="n">zero</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="o">=</span> <span class="n">nine</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'digit'</span><span class="p">,</span>
      <span class="n">_</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">''</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="k">assert</span><span class="p">(</span><span class="n">asciiCharType</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="o">==</span> <span class="s">'space'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-variable'>pattern_types variable</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// 'var a' and 'var b' are variable patterns</span>
    <span class="c1">// that bind to 1 and 2, respectively.</span>
    <span class="k">case</span> <span class="p">(</span><span class="kd">var</span> <span class="n">a</span><span class="p">,</span> <span class="kd">var</span> <span class="n">b</span><span class="p">)</span><span class="o">:</span>
    <span class="c1">// 'a' and 'b' are in scope in the case body.</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-variable-typed'>pattern_types variable-typed</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Does not match.</span>
    <span class="k">case</span> <span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">String</span> <span class="n">b</span><span class="p">)</span><span class="o">:</span> <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-wildcard'>pattern_types wildcard</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="kd">var</span> <span class="p">[</span><span class="n">_</span><span class="p">,</span> <span class="n">two</span><span class="p">,</span> <span class="n">_</span><span class="p">]</span> <span class="o">=</span> <span class="n">list</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-wildcard-typed'>pattern_types wildcard-typed</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">record</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">'one'</span><span class="p">);</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="p">(</span><span class="kt">int</span> <span class="n">_</span><span class="p">,</span> <span class="kt">String</span> <span class="n">_</span><span class="p">)</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'First field is int and second is String.'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='pattern_types-parens'>pattern_types parens</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">x</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">y</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">z</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">token</span> <span class="o">=</span> <span class="k">switch</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="n">x</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">z</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'matches true'</span><span class="p">,</span>
    <span class="p">(</span><span class="n">x</span> <span class="o">||</span> <span class="n">y</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">z</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'matches false'</span><span class="p">,</span>
    <span class="c1">// ...</span>
    <span class="n">_</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">FormatException</span><span class="p">(</span><span class="s">'Invalid'</span><span class="p">)</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-constant-pattern'>switch constant-pattern</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Constant pattern matches if 1 == number.</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'one'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-list-pattern'>switch list-pattern</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">obj</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">];</span>
  <span class="kd">const</span> <span class="n">a</span> <span class="o">=</span> <span class="s">'a'</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">b</span> <span class="o">=</span> <span class="s">'b'</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// List pattern [a, b] matches obj first if obj is a list with two fields,</span>
    <span class="c1">// then if its fields match the constant subpatterns 'a' and 'b'.</span>
    <span class="k">case</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$a</span><span class="s">, </span><span class="si">$b</span><span class="s">'</span><span class="p">);</span> <span class="c1">// a, b</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-statement'>switch-statement</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">obj</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">first</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">last</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Matches if 1 == obj.</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'one'</span><span class="p">);</span>

    <span class="c1">// Matches if the value of obj is between the constant values of 'first' and 'last'.</span>
    <span class="k">case</span> <span class="p">&gt;</span><span class="o">=</span> <span class="n">first</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="o">=</span> <span class="nl">last:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'in range'</span><span class="p">);</span>

    <span class="c1">// Matches if obj is a record with two fields, then assigns the fields to 'a' and 'b'.</span>
    <span class="k">case</span> <span class="p">(</span><span class="kd">var</span> <span class="n">a</span><span class="p">,</span> <span class="kd">var</span> <span class="n">b</span><span class="p">)</span><span class="o">:</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'a = </span><span class="si">$a</span><span class="s">, b = </span><span class="si">$b</span><span class="s">'</span><span class="p">);</span>

    <span class="k">default</span><span class="o">:</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h1 id='concurrency'>Concurrency</h1><h2 id='sync-read-json-file'>sync read json file</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:convert'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>

<span class="c1">// {"a": "foo", "b": "bar", "c": "baz"}</span>
<span class="kd">const</span> <span class="kt">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">'with_keys.json'</span><span class="p">;</span>

<span class="kt">String</span> <span class="nf">_readFileSync</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
  <span class="kd">final</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">readAsStringSync</span><span class="p">();</span>
  <span class="k">return</span> <span class="n">contents</span><span class="o">.</span><span class="na">trim</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="c1">// Read some data.</span>
  <span class="kd">final</span> <span class="n">fileData</span> <span class="o">=</span> <span class="n">_readFileSync</span><span class="p">();</span>
  <span class="kd">final</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="n">jsonDecode</span><span class="p">(</span><span class="n">fileData</span><span class="p">);</span>
  <span class="c1">// Use that data.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Number of JSON keys: </span><span class="si">${jsonData.length}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='async-read-json-file'>async read json file</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:convert'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>

<span class="c1">// {"a": "foo", "b": "bar", "c": "baz"}</span>
<span class="kd">const</span> <span class="kt">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">'with_keys.json'</span><span class="p">;</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">_readFileAsync</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
  <span class="kd">final</span> <span class="n">contents</span> <span class="o">=</span> <span class="k">await</span> <span class="n">file</span><span class="o">.</span><span class="na">readAsString</span><span class="p">();</span>
  <span class="k">return</span> <span class="n">contents</span><span class="o">.</span><span class="na">trim</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="c1">// Read some data.</span>
  <span class="kd">final</span> <span class="n">fileData</span> <span class="o">=</span> <span class="k">await</span> <span class="n">_readFileAsync</span><span class="p">();</span>
  <span class="kd">final</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="n">jsonDecode</span><span class="p">(</span><span class="n">fileData</span><span class="p">);</span>
  <span class="c1">// Use that data.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Number of JSON keys: </span><span class="si">${jsonData.length}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='simple_isolate_closure'>simple_isolate_closure</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:convert'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:isolate'</span><span class="o">;</span>

<span class="c1">// {"a": "foo", "b": "bar", "c": "baz"}</span>
<span class="kd">const</span> <span class="kt">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">'with_keys.json'</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="c1">// Read some data.</span>
  <span class="kd">final</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Isolate</span><span class="o">.</span><span class="na">run</span><span class="p">(()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">fileData</span> <span class="o">=</span> <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="na">readAsString</span><span class="p">();</span>
    <span class="kd">final</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="n">jsonDecode</span><span class="p">(</span><span class="n">fileData</span><span class="p">)</span> <span class="k">as</span> <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;;</span>
    <span class="k">return</span> <span class="n">jsonData</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="c1">// Use that data.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Number of JSON keys: </span><span class="si">${jsonData.length}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='simple_worker_isolate'>simple_worker_isolate</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:convert'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:isolate'</span><span class="o">;</span>

<span class="c1">// {"a": "foo", "b": "bar", "c": "baz"}</span>
<span class="kd">const</span> <span class="kt">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">'with_keys.json'</span><span class="p">;</span>
<span class="c1">// spawned</span>
<span class="n">Future</span><span class="p">&lt;</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;&gt;</span> <span class="n">_readAndParseJson</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">fileData</span> <span class="o">=</span> <span class="k">await</span> <span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="na">readAsString</span><span class="p">();</span>
  <span class="kd">final</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="n">jsonDecode</span><span class="p">(</span><span class="n">fileData</span><span class="p">)</span> <span class="k">as</span> <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;;</span>
  <span class="k">return</span> <span class="n">jsonData</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="c1">// Read some data.</span>
  <span class="kd">final</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Isolate</span><span class="o">.</span><span class="na">run</span><span class="p">(</span><span class="n">_readAndParseJson</span><span class="p">);</span>
  <span class="c1">// Use that data.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Number of JSON keys: </span><span class="si">${jsonData.length}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h1 id='extension-methods'>Extension Methods</h1><h2 id='extension-list'>extension list</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">extension</span> <span class="n">MyFancyList</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="kd">on</span> <span class="kt">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="kd">get</span> <span class="n">doubleLength</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">length</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="kd">operator</span> <span class="o">-</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">reversed</span><span class="o">.</span><span class="na">toList</span><span class="p">();</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;&gt;</span> <span class="n">split</span><span class="p">(</span><span class="kt">int</span> <span class="n">at</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="p">[</span><span class="n">sublist</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">at</span><span class="p">),</span> <span class="n">sublist</span><span class="p">(</span><span class="n">at</span><span class="p">)];</span>
<span class="p">}</span>

<span class="n">extension</span> <span class="n">MyIntList</span> <span class="kd">on</span> <span class="kt">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="kd">get</span> <span class="n">tripleLength</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">length</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">];</span>
  <span class="n">print</span><span class="p">(</span><span class="n">list1</span><span class="o">.</span><span class="na">doubleLength</span><span class="p">);</span> <span class="c1">// 6</span>
  <span class="n">print</span><span class="p">(</span><span class="o">-</span><span class="n">list1</span><span class="p">);</span> <span class="c1">// [c, b, a]</span>
  <span class="n">print</span><span class="p">(</span><span class="n">list1</span><span class="o">.</span><span class="na">split</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span> <span class="c1">// [[a], [b, c]]</span>

  <span class="kd">final</span> <span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="n">print</span><span class="p">(</span><span class="n">list2</span><span class="o">.</span><span class="na">tripleLength</span><span class="p">);</span> <span class="c1">// 9</span>
<span class="p">}</span>
</code></pre></div><h2 id='extension-string-amp-import-as-hide'>extension String &amp; import-as-hide</h2>
<blockquote>
<p>string_apis.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">extension</span> <span class="n">NumberParsing</span> <span class="kd">on</span> <span class="kt">String</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">parseInt</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">double</span> <span class="n">parseDouble</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">double</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>string_apis_2.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">extension</span> <span class="n">NumberParsing2</span> <span class="kd">on</span> <span class="kt">String</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">parseInt</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">extension</span> <span class="n">HexParsing</span> <span class="kd">on</span> <span class="kt">String</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">parseHexInt</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nl">radix:</span> <span class="mi">16</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>string_apis_3.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">extension</span> <span class="n">NumberParsing</span> <span class="kd">on</span> <span class="kt">String</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">parseInt</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nl">radix:</span> <span class="mi">16</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">num</span> <span class="n">parseNum</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">num</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>string_apis_unnamed.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">extension</span> <span class="kd">on</span> <span class="kt">String</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isBlank</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">trim</span><span class="p">()</span><span class="o">.</span><span class="na">isEmpty</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">isBlank</span><span class="p">(</span><span class="kt">String</span> <span class="n">string</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">string</span><span class="o">.</span><span class="na">isBlank</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">assert</span><span class="p">(</span><span class="n">isBlank</span><span class="p">(</span><span class="s">'not-blank'</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">);</span>
  <span class="k">assert</span><span class="p">(</span><span class="n">isBlank</span><span class="p">(</span><span class="s">' not-blank '</span><span class="p">)</span> <span class="o">==</span> <span class="kc">false</span><span class="p">);</span>
  <span class="k">assert</span><span class="p">(</span><span class="n">isBlank</span><span class="p">(</span><span class="s">''</span><span class="p">)</span> <span class="o">==</span> <span class="kc">true</span><span class="p">);</span>
  <span class="k">assert</span><span class="p">(</span><span class="n">isBlank</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span> <span class="o">==</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>usage_explicit.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// Both libraries define extensions on String that contain parseInt(),</span>
<span class="c1">// and the extensions have different names.</span>
<span class="kn">import</span> <span class="s">'string_apis.dart'</span><span class="o">;</span> <span class="c1">// Contains NumberParsing extension.</span>
<span class="kn">import</span> <span class="s">'string_apis_2.dart'</span><span class="o">;</span> <span class="c1">// Contains NumberParsing2 extension.</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// print('42'.parseInt()); // Doesn't work.</span>
  <span class="n">print</span><span class="p">(</span><span class="n">NumberParsing</span><span class="p">(</span><span class="s">'42'</span><span class="p">)</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span>
  <span class="n">print</span><span class="p">(</span><span class="n">NumberParsing2</span><span class="p">(</span><span class="s">'42'</span><span class="p">)</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseDouble</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>usage_import.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// Defines the String extension method parseInt().</span>
<span class="kn">import</span> <span class="s">'string_apis.dart'</span><span class="o">;</span>

<span class="c1">// Also defines parseInt(), but hiding NumberParsing2</span>
<span class="c1">// hides that extension method.</span>
<span class="kn">import</span> <span class="s">'string_apis_2.dart'</span> <span class="kd">hide</span> <span class="n">NumberParsing2</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Uses the parseInt() defined in 'string_apis.dart'.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span>
  <span class="c1">// Uses parseHexInt(), defined in 'string_apis_2.dart'.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseHexInt</span><span class="p">());</span>
  <span class="c1">// Uses the parseDouble() defined in 'string_apis.dart'.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseDouble</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>usage_prefix.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// Both libraries define extensions named NumberParsing</span>
<span class="c1">// that contain the extension method parseInt().</span>
<span class="c1">// One NumberParsing extension (in 'string_apis_3.dart')</span>
<span class="c1">// also defines parseNum().</span>
<span class="kn">import</span> <span class="s">'string_apis.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'string_apis_3.dart'</span> <span class="k">as</span> <span class="n">rad</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// print('42'.parseInt()); // Doesn't work.</span>
  <span class="c1">// Use the ParseNumbers extension from string_apis.dart.</span>
  <span class="n">print</span><span class="p">(</span><span class="n">NumberParsing</span><span class="p">(</span><span class="s">'42'</span><span class="p">)</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span>
  <span class="c1">// Use the ParseNumbers extension from string_apis_3.dart.</span>
  <span class="n">print</span><span class="p">(</span><span class="n">rad</span><span class="o">.</span><span class="na">NumberParsing</span><span class="p">(</span><span class="s">'42'</span><span class="p">)</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span>
  <span class="c1">// Only string_apis_3.dart has parseNum().</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseNum</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>usage_simple_extension.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// Import a library that contains an extension on String.</span>
<span class="kn">import</span> <span class="s">'string_apis.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// WithOUT extension methods.</span>
  <span class="n">print</span><span class="p">(</span><span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="s">'42'</span><span class="p">));</span>
  <span class="n">print</span><span class="p">(</span><span class="kt">double</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="s">'42'</span><span class="p">));</span>

  <span class="c1">// WITH extension methods.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">padLeft</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span> <span class="c1">// Use a String method.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span> <span class="c1">// Use an extension method.</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'42'</span><span class="o">.</span><span class="na">parseDouble</span><span class="p">());</span>

  <span class="c1">// var vs. dynamic.</span>
  <span class="kd">var</span> <span class="n">v</span> <span class="o">=</span> <span class="s">'2'</span><span class="p">;</span>
  <span class="n">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span> <span class="c1">// Output: 2</span>

  <span class="kd">dynamic</span> <span class="n">d</span> <span class="o">=</span> <span class="s">'2'</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Runtime exception: NoSuchMethodError</span>
    <span class="n">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="na">parseInt</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="n">print</span><span class="p">(</span><span class="n">d</span><span class="p">);</span> <span class="c1">// Avoid unused_local_variable hint.</span>
<span class="p">}</span>
</code></pre></div><h1 id='null-safety'>Null safety</h1><h2 id='non_nullable_types'>non_nullable_types</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">145</span><span class="p">;</span>
  <span class="c1">// A value of type 'Null' can't be assigned to a variable of type 'int'.</span>
  <span class="c1">// a = null;</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'a is </span><span class="si">$a</span><span class="s">.'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='nullable_types'>nullable_types</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'a is </span><span class="si">$a</span><span class="s">.'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='more_nullable_types'>more_nullable_types</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">aListOfStrings</span> <span class="o">=</span> <span class="p">[</span><span class="s">'one'</span><span class="p">,</span> <span class="s">'two'</span><span class="p">,</span> <span class="s">'three'</span><span class="p">];</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span><span class="o">?</span> <span class="n">aNullableListOfStrings</span><span class="p">;</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="o">?</span><span class="p">&gt;</span> <span class="n">aListOfNullableStrings</span> <span class="o">=</span> <span class="p">[</span><span class="s">'one'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s">'three'</span><span class="p">];</span>

  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$aListOfStrings</span><span class="s">.'</span><span class="p">);</span> <span class="c1">// [one, two, three]</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$aNullableListOfStrings</span><span class="s">.'</span><span class="p">);</span> <span class="c1">// null</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$aListOfNullableStrings</span><span class="s">.'</span><span class="p">);</span> <span class="c1">// [one, null, three]</span>
<span class="p">}</span>
</code></pre></div><h2 id='late_keyword'>late_keyword</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Meal</span> <span class="p">{</span>
  <span class="kd">late</span> <span class="kt">String</span> <span class="n">_description</span><span class="p">;</span>

  <span class="kd">set</span> <span class="n">description</span><span class="p">(</span><span class="kt">String</span> <span class="n">desc</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s">'Meal description: </span><span class="si">$desc</span><span class="s">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">String</span> <span class="kd">get</span> <span class="n">description</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_description</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">myMeal</span> <span class="o">=</span> <span class="n">Meal</span><span class="p">();</span>
  <span class="c1">// Unhandled exception:</span>
  <span class="c1">// LateInitializationError: Field '_description@18009629' has not been initialized.</span>
  <span class="n">print</span><span class="p">(</span><span class="n">myMeal</span><span class="o">.</span><span class="na">description</span><span class="p">);</span>
  <span class="n">myMeal</span><span class="o">.</span><span class="na">description</span> <span class="o">=</span> <span class="s">'Feijoada!'</span><span class="p">;</span>
  <span class="n">print</span><span class="p">(</span><span class="n">myMeal</span><span class="o">.</span><span class="na">description</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='late_lazy'>late_lazy</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">int</span> <span class="nf">_computeValue</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'In _computeValue...'</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">CachedValueProvider</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">_cache</span> <span class="o">=</span> <span class="n">_computeValue</span><span class="p">();</span>
  <span class="kt">int</span> <span class="kd">get</span> <span class="n">value</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_cache</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Calling constructor...'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="n">provider</span> <span class="o">=</span> <span class="n">CachedValueProvider</span><span class="p">();</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Getting value...'</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'The value is </span><span class="si">${provider.value}</span><span class="s">!'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Calling constructor...</span>
<span class="c1">// In _computeValue...</span>
<span class="c1">// Getting value...</span>
<span class="c1">// The value is 3!</span>
</code></pre></div><h2 id='late_circular_references'>late_circular_references</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Team</span> <span class="p">{</span>
  <span class="kd">late</span> <span class="kd">final</span> <span class="n">Coach</span> <span class="n">coach</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Coach</span> <span class="p">{</span>
  <span class="kd">late</span> <span class="kd">final</span> <span class="n">Team</span> <span class="n">team</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">myTeam</span> <span class="o">=</span> <span class="n">Team</span><span class="p">();</span>
  <span class="kd">final</span> <span class="n">myCoach</span> <span class="o">=</span> <span class="n">Coach</span><span class="p">();</span>
  <span class="n">myTeam</span><span class="o">.</span><span class="na">coach</span> <span class="o">=</span> <span class="n">myCoach</span><span class="p">;</span>
  <span class="n">myCoach</span><span class="o">.</span><span class="na">team</span> <span class="o">=</span> <span class="n">myTeam</span><span class="p">;</span>

  <span class="n">print</span><span class="p">(</span><span class="s">'All done!'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='promotion_exceptions'>promotion_exceptions</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">int</span> <span class="nf">getLength</span><span class="p">(</span><span class="kt">String</span><span class="o">?</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Try throwing an exception here if `str` is null.</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'String is null'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="n">getLength</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><h2 id='type_promotion'>type_promotion</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">int</span> <span class="nf">getLength</span><span class="p">(</span><span class="kt">String</span><span class="o">?</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Add null check here</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">str</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="n">getLength</span><span class="p">(</span><span class="s">'This is a string!'</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><h2 id='assertion_operator'>assertion_operator</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">int</span><span class="o">?</span> <span class="n">couldReturnNullButDoesnt</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">couldBeNullButIsnt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="o">?</span><span class="p">&gt;</span> <span class="n">listThatCouldHoldNulls</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">couldBeNullButIsnt</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">listThatCouldHoldNulls</span><span class="o">.</span><span class="na">first</span><span class="o">!</span><span class="p">;</span> <span class="c1">// first item in the list</span>
  <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">couldReturnNullButDoesnt</span><span class="p">()</span><span class="o">!.</span><span class="na">abs</span><span class="p">();</span> <span class="c1">// absolute value</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'a is </span><span class="si">$a</span><span class="s">.'</span><span class="p">);</span> <span class="c1">// 1</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'b is </span><span class="si">$b</span><span class="s">.'</span><span class="p">);</span> <span class="c1">// 2</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'c is </span><span class="si">$c</span><span class="s">.'</span><span class="p">);</span> <span class="c1">// 3</span>
<span class="p">}</span>
</code></pre></div><h2 id='null_aware_operators'>null_aware_operators</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">TestObject</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">action</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="n">TestObject</span><span class="o">?</span> <span class="n">nullableObjectGenerate</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">TestObject</span><span class="p">();</span>

<span class="kt">String</span><span class="o">?</span> <span class="n">nullableStringGenerate</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kc">null</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">other</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">nullableObject</span> <span class="o">=</span> <span class="n">nullableObjectGenerate</span><span class="p">();</span>
  <span class="c1">// The following calls the 'action' method</span>
  <span class="c1">// only if nullableObject is not null</span>
  <span class="n">nullableObject</span><span class="o">?.</span><span class="na">action</span><span class="p">();</span>

  <span class="kd">var</span> <span class="n">nullableString</span> <span class="o">=</span> <span class="n">nullableStringGenerate</span><span class="p">();</span>
  <span class="c1">// Both of the following print out 'alternate' if nullableString is null</span>
  <span class="n">print</span><span class="p">(</span><span class="n">nullableString</span> <span class="o">??</span> <span class="s">'alternate'</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">nullableString</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">nullableString</span> <span class="o">:</span> <span class="s">'alternate'</span><span class="p">);</span>

  <span class="c1">// Both of the following set nullableString to 'alternate' if it is null</span>
  <span class="n">nullableString</span> <span class="o">??=</span> <span class="s">'alternate'</span><span class="p">;</span>
  <span class="n">nullableString</span> <span class="o">=</span> <span class="n">nullableString</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">nullableString</span> <span class="o">:</span> <span class="s">'alternate'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h1 id='non-promotion'>Non promotion</h1><h2 id='property_bang'>property_bang</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">C1</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">;</span>

  <span class="kt">void</span> <span class="n">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">!.</span><span class="na">isEven</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='property_copy'>property_copy</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">C</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">void</span> <span class="n">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">i</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">i</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// return</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='write_combine_ifs'>write_combine_ifs</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">bool</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='write_change_type'>write_change_type</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">bool</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='loop'>loop</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Link</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">late</span> <span class="n">Link</span> <span class="n">next</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">Link</span><span class="o">?</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">p</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="na">value</span><span class="p">);</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">next</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='switch-loop'>switch-loop</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nl">label:</span>
    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="n">print</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span>
      <span class="n">j</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span>
      <span class="k">continue</span> <span class="n">label</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='catch-null-check'>catch-null-check</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span> <span class="c1">// (1)</span>
    <span class="c1">// ... Additional code ...</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// (2)</span>
    <span class="c1">// ... Additional code ...</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// (3) OK due to the null check in the line above.</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Handle the case where i is null.</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='catch-bang'>catch-bang</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span> <span class="c1">// (1)</span>
    <span class="c1">// ... Additional code ...</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// (2)</span>
    <span class="c1">// ... Additional code ...</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">!.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// (3) OK because of the `!`.</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='subtype-variable'>subtype-variable</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">Object</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">o</span> <span class="k">is</span> <span class="kt">Comparable</span> <span class="cm">/* (1) */</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">Object</span> <span class="n">o2</span> <span class="o">=</span> <span class="n">o</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">o2</span> <span class="k">is</span> <span class="kt">Pattern</span> <span class="cm">/* (2) */</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="n">o2</span><span class="o">.</span><span class="na">matchAsPrefix</span><span class="p">(</span><span class="s">'foo'</span><span class="p">));</span> <span class="c1">// (3) OK; o2 was promoted to `Pattern`.</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='subtype-redundant'>subtype-redundant</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">Object</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">o</span> <span class="k">is</span> <span class="kt">Comparable</span> <span class="cm">/* (1) */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">o</span> <span class="k">is</span> <span class="kt">Pattern</span> <span class="cm">/* (2) */</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">((</span><span class="n">o</span> <span class="k">as</span> <span class="kt">Pattern</span><span class="p">)</span><span class="o">.</span><span class="na">matchAsPrefix</span><span class="p">(</span><span class="s">'foo'</span><span class="p">));</span> <span class="c1">// (3) OK</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='subtype-string'>subtype-String</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">Object</span> <span class="n">o</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">o</span> <span class="k">is</span> <span class="kt">Comparable</span> <span class="cm">/* (1) */</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">o</span> <span class="k">is</span> <span class="kt">String</span> <span class="cm">/* (2) */</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="na">matchAsPrefix</span><span class="p">(</span><span class="s">'foo'</span><span class="p">));</span> <span class="c1">// (3) OK</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='local-write-capture-reorder'>local-write-capture-reorder</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// (1)</span>
  <span class="c1">// ... Additional code ...</span>
  <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// (2) OK</span>
  <span class="kd">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="c1">// ... Use foo ...</span>
<span class="p">}</span>
</code></pre></div><h2 id='local-write-capture-copy'>local-write-capture-copy</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="c1">// ... Use foo ...</span>
  <span class="kd">var</span> <span class="n">i2</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i2</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// (1)</span>
  <span class="c1">// ... Additional code ...</span>
  <span class="n">print</span><span class="p">(</span><span class="n">i2</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// (2) OK because `i2` isn't write captured.</span>
<span class="p">}</span>
</code></pre></div><h2 id='local-write-capture-bang'>local-write-capture-bang</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="c1">// ... Use foo ...</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// (1)</span>
  <span class="c1">// ... Additional code ...</span>
  <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">!.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// (2) OK due to `!` check.</span>
<span class="p">}</span>
</code></pre></div><h2 id='closure-new-var'>closure-new-var</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">i2</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i2</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// (1) OK because `i2` isn't changed later.</span>
  <span class="p">};</span>
  <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span> <span class="c1">// (2)</span>
<span class="p">}</span>
</code></pre></div><h2 id='closure-new-var2'>closure-new-var2</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">??</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// OK</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h2 id='closure-write-capture'>closure-write-capture</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">?</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span><span class="o">?</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="n">i2</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i2</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">print</span><span class="p">(</span><span class="n">i2</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span> <span class="c1">// OK because i2 is local to this closure.</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="n">bar</span> <span class="o">=</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h1 id='type-system'>Type System</h1><h2 id='animal-type'>animal type</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">Never</span> <span class="n">ellipsis</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'!'</span><span class="p">);</span>

<span class="kd">class</span> <span class="nc">Animal</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">chase</span><span class="p">(</span><span class="n">Animal</span> <span class="n">a</span><span class="p">)</span> <span class="p">{}</span>
  <span class="n">Animal</span> <span class="kd">get</span> <span class="n">parent</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">ellipsis</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">HoneyBadger</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">chase</span><span class="p">(</span><span class="n">Animal</span> <span class="n">a</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nd">@override</span>
  <span class="n">HoneyBadger</span> <span class="kd">get</span> <span class="n">parent</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">ellipsis</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">HoneyBadger1</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">chase</span><span class="p">(</span><span class="kt">Object</span> <span class="n">a</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nd">@override</span>
  <span class="n">Animal</span> <span class="kd">get</span> <span class="n">parent</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">ellipsis</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Alligator</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">Cat</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">Dog</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">MaineCoon</span> <span class="kd">extends</span> <span class="n">Cat</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Animal</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">();</span> <span class="c1">// ok</span>
  <span class="n">MaineCoon</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">();</span> <span class="c1">// error</span>
  <span class="n">Cat</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">();</span> <span class="c1">// ok</span>
  <span class="n">Cat</span> <span class="n">c4</span> <span class="o">=</span> <span class="n">MaineCoon</span><span class="p">();</span> <span class="c1">// ok</span>
  <span class="c1">// generic-type-assignment</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">MaineCoon</span><span class="p">&gt;</span> <span class="n">myMaineCoons</span> <span class="o">=</span> <span class="n">ellipsis</span><span class="p">();</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Cat</span><span class="p">&gt;</span> <span class="n">myCats</span> <span class="o">=</span> <span class="n">myMaineCoons</span><span class="p">;</span>

  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Animal</span><span class="p">&gt;</span> <span class="n">myAnimals</span> <span class="o">=</span> <span class="n">ellipsis</span><span class="p">();</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Cat</span><span class="p">&gt;</span> <span class="n">myCats</span> <span class="o">=</span> <span class="n">myAnimals</span><span class="p">;</span> <span class="c1">// error</span>

  <span class="c1">// generic-type-assignment-implied-cast</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Animal</span><span class="p">&gt;</span> <span class="n">myAnimals1</span> <span class="o">=</span> <span class="n">ellipsis</span><span class="p">();</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Cat</span><span class="p">&gt;</span> <span class="n">myCats1</span> <span class="o">=</span> <span class="n">myAnimals1</span> <span class="k">as</span> <span class="kt">List</span><span class="p">&lt;</span><span class="n">Cat</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div><h2 id='runtime-checks'>runtime-checks</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// Unhandled exception:</span>
<span class="c1">// type 'List&lt;Animal&gt;' is not a subtype of type 'List&lt;Cat&gt;' in type cast</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Animal</span><span class="p">&gt;</span> <span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dog</span><span class="p">()];</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Cat</span><span class="p">&gt;</span> <span class="n">cats</span> <span class="o">=</span> <span class="n">animals</span> <span class="k">as</span> <span class="kt">List</span><span class="p">&lt;</span><span class="n">Cat</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div><h2 id='covariant'>covariant</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Animal</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">chase</span><span class="p">(</span><span class="n">Animal</span> <span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Mouse</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">Cat</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">chase</span><span class="p">(</span><span class="kd">covariant</span> <span class="n">Mouse</span> <span class="n">x</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><h2 id='bounded'>bounded</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">C</span><span class="p">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Iterable</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">T</span> <span class="n">collection</span><span class="p">;</span>
  <span class="n">C</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">collection</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">cannotRunThis</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// undefined_method</span>
  <span class="kd">var</span> <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="n">Iterable</span><span class="o">.</span><span class="na">empty</span><span class="p">())</span><span class="o">.</span><span class="na">collection</span><span class="p">;</span>
  <span class="c1">// c.add(2); //!analysis-issue</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// add-type-arg</span>
  <span class="kd">var</span> <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">&lt;</span><span class="kt">List</span><span class="p">&gt;([])</span><span class="o">.</span><span class="na">collection</span><span class="p">;</span>
  <span class="n">c</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">c</span><span class="p">);</span> <span class="c1">// [2]</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-dart-2-note-unused-but-necessary'>strong_analysis dart-2-note-unused-but-necessary</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="c1">// i is dynamic in Dart 1.x</span>
  <span class="c1">// i is inferred as int in Dart 2</span>
  <span class="kd">dynamic</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">x</span> <span class="o">=</span> <span class="s">'Hello'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-opening-example'>strong_analysis opening-example</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">printInts</span><span class="p">(</span><span class="kt">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">a</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">list</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// List&lt;dynamic&gt; list</span>
  <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="s">'2'</span><span class="p">);</span>
  <span class="c1">// The argument type 'List&lt;dynamic&gt;' can't</span>
  <span class="c1">// be assigned to the parameter type 'List&lt;int&gt;'.</span>
  <span class="n">printInts</span><span class="p">(</span><span class="n">list</span><span class="p">);</span> <span class="c1">//!analysis-issue</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-static-analysis-enabled'>strong_analysis static-analysis-enabled</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// static-analysis-enabled</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ignore: stable, beta, dev, invalid_assignment</span>
  <span class="kt">bool</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-type-inference-orig'>strong_analysis type-inference-orig</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">// type-inference-orig</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">arguments</span> <span class="o">=</span> <span class="p">{</span><span class="s">'argA'</span><span class="o">:</span> <span class="s">'hello'</span><span class="p">,</span> <span class="s">'argB'</span><span class="o">:</span> <span class="mi">42</span><span class="p">};</span>
  <span class="c1">// ignore: stable, beta, dev, argument_type_not_assignable</span>
  <span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'method'</span><span class="o">:</span> <span class="s">'someMethod'</span><span class="p">,</span>
    <span class="s">'args'</span><span class="o">:</span> <span class="p">&lt;</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;&gt;[</span><span class="n">arguments</span><span class="p">],</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-type-inference'>strong_analysis type-inference</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">List</span><span class="p">&lt;</span><span class="kd">dynamic</span><span class="p">&gt;&gt;</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="c1">// List&lt;dynamic&gt;? arguments</span>
  <span class="kd">var</span> <span class="n">arguments</span> <span class="o">=</span> <span class="n">foo</span><span class="p">[</span><span class="s">'args'</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-local-var-type-inference-error'>strong_analysis local-var-type-inference-error</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// x is inferred as an int.</span>
  <span class="kd">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="c1">// ignore: stable, beta, dev, stable, dev, invalid_assignment</span>
  <span class="n">x</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">;</span> <span class="c1">//!analysis-issue</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-local-var-type-inference-ok'>strong_analysis local-var-type-inference-ok</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// A num can be double or int.</span>
  <span class="kt">num</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='strong_analysis-type-arg-inference'>strong_analysis type-arg-inference</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Inferred as if you wrote &lt;int&gt;[].</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">listOfInt</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="c1">// Inferred as if you wrote &lt;double&gt;[3.0].</span>
  <span class="kd">var</span> <span class="n">listOfDouble</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">];</span>
  <span class="c1">// Inferred as Iterable&lt;int&gt;.</span>
  <span class="kd">var</span> <span class="n">ints</span> <span class="o">=</span> <span class="n">listOfDouble</span><span class="o">.</span><span class="na">map</span><span class="p">((</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">x</span><span class="o">.</span><span class="na">toInt</span><span class="p">());</span>
  <span class="c1">// ignore: stable, beta, dev, invalid_assignment</span>
  <span class="n">listOfDouble</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">''</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-canvas-undefined'>common_fixes_analysis canvas-undefined</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">var</span> <span class="n">canvas</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'canvas'</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
  <span class="c1">// ignore: stable, beta, dev, undefined_getter</span>
  <span class="n">canvas</span><span class="o">.</span><span class="na">context2D</span><span class="o">.</span><span class="na">lineTo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span> <span class="c1">//!analysis-issue</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-canvas-as'>common_fixes_analysis canvas-as</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">var</span> <span class="n">canvas</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'canvas'</span><span class="p">)</span> <span class="k">as</span> <span class="n">CanvasElement</span><span class="p">;</span>
  <span class="n">canvas</span><span class="o">.</span><span class="na">context2D</span><span class="o">.</span><span class="na">lineTo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-canvas-dynamic'>common_fixes_analysis canvas-dynamic</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">dynamic</span> <span class="n">canvasOrImg</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'canvas, img'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="n">width</span> <span class="o">=</span> <span class="n">canvasOrImg</span><span class="o">.</span><span class="na">width</span><span class="p">;</span> <span class="c1">// dynamic width</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-inferred-collection-types'>common_fixes_analysis inferred-collection-types</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Inferred as Map&lt;String, int&gt;</span>
  <span class="kd">var</span> <span class="n">map</span> <span class="o">=</span> <span class="p">{</span><span class="s">'a'</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'b'</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'c'</span><span class="o">:</span> <span class="mi">3</span><span class="p">};</span>
  <span class="c1">// ignore: stable, beta, dev, invalid_assignment</span>
  <span class="n">map</span><span class="p">[</span><span class="s">'d'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span> <span class="c1">//!analysis-issue</span>

  <span class="c1">// ok</span>
  <span class="kd">var</span> <span class="n">m</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">num</span><span class="p">&gt;{</span><span class="s">'a'</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'b'</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'c'</span><span class="o">:</span> <span class="mi">3</span><span class="p">};</span>
  <span class="n">m</span><span class="p">[</span><span class="s">'d'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-invalid-method-override'>common_fixes_analysis invalid-method-override</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">NumberAdder</span> <span class="p">{</span>
  <span class="kt">num</span> <span class="n">add</span><span class="p">(</span><span class="kt">num</span> <span class="n">a</span><span class="p">,</span> <span class="kt">num</span> <span class="n">b</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// invalid-method-override</span>
<span class="kd">class</span> <span class="nc">MyAdder</span> <span class="kd">extends</span> <span class="n">NumberAdder</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="c1">// ignore: stable, beta, dev, invalid_override</span>
  <span class="kt">num</span> <span class="n">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span> <span class="c1">// error</span>
<span class="p">}</span>

<span class="c1">// runtime-failure</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">NumberAdder</span> <span class="n">adder</span> <span class="o">=</span> <span class="n">MyAdder</span><span class="p">();</span>
  <span class="n">adder</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-type-arguments'>common_fixes_analysis type-arguments</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Superclass</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">method</span><span class="p">(</span><span class="n">T</span> <span class="n">param</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Subclass</span> <span class="kd">extends</span> <span class="n">Superclass</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="c1">// ignore: stable, beta, dev, invalid_override</span>
  <span class="kt">void</span> <span class="n">method</span><span class="p">(</span><span class="kt">int</span> <span class="n">param</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-super-goes-last'>common_fixes_analysis super-goes-last</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">Eats</span> <span class="p">{}</span>

<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Animal</span> <span class="p">{</span>
  <span class="n">Animal</span><span class="p">(</span><span class="n">Eats</span> <span class="n">food</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">_HoneyBadger</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">_name</span><span class="p">;</span>

  <span class="c1">// super-goes-last</span>
  <span class="n">_HoneyBadger</span><span class="p">(</span><span class="n">Eats</span> <span class="n">food</span><span class="p">,</span> <span class="kt">String</span> <span class="n">name</span><span class="p">)</span>
      <span class="c1">// ignore: stable, beta, dev, super_invocation_not_last</span>
      <span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="n">food</span><span class="p">),</span>
        <span class="n">_name</span> <span class="o">=</span> <span class="n">name</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">HoneyBadger</span> <span class="kd">extends</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">_name</span><span class="p">;</span>

  <span class="c1">// super-goes-last-ok</span>
  <span class="n">HoneyBadger</span><span class="p">(</span><span class="n">Eats</span> <span class="n">food</span><span class="p">,</span> <span class="kt">String</span> <span class="n">name</span><span class="p">)</span>
      <span class="o">:</span> <span class="n">_name</span> <span class="o">=</span> <span class="n">name</span><span class="p">,</span>
        <span class="k">super</span><span class="p">(</span><span class="n">food</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-func-fail'>common_fixes_analysis func-fail</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">funcFail</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">filterValues</span><span class="p">(</span><span class="kt">bool</span> <span class="kt">Function</span><span class="p">(</span><span class="kd">dynamic</span><span class="p">)</span> <span class="n">filter</span><span class="p">)</span> <span class="p">{}</span>
  <span class="c1">// ignore: stable, beta, dev, argument_type_not_assignable</span>
  <span class="n">filterValues</span><span class="p">((</span><span class="kt">String</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">x</span><span class="o">.</span><span class="na">contains</span><span class="p">(</span><span class="s">'hello'</span><span class="p">));</span> <span class="c1">// error</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">funcT</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">filterValues</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="kt">bool</span> <span class="kt">Function</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="n">filter</span><span class="p">)</span> <span class="p">{}</span>
  <span class="n">filterValues</span><span class="p">((</span><span class="kt">String</span> <span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">x</span><span class="o">.</span><span class="na">contains</span><span class="p">(</span><span class="s">'hello'</span><span class="p">));</span> <span class="c1">// ok</span>
  <span class="n">filterValues</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;((</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">x</span><span class="o">.</span><span class="na">contains</span><span class="p">(</span><span class="s">'hello'</span><span class="p">));</span> <span class="c1">// ok</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">funcCast</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">filterValues</span><span class="p">(</span><span class="kt">bool</span> <span class="kt">Function</span><span class="p">(</span><span class="kd">dynamic</span><span class="p">)</span> <span class="n">filter</span><span class="p">)</span> <span class="p">{}</span>
  <span class="n">filterValues</span><span class="p">((</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="p">(</span><span class="n">x</span> <span class="k">as</span> <span class="kt">String</span><span class="p">)</span><span class="o">.</span><span class="na">contains</span><span class="p">(</span><span class="s">'hello'</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><h2 id='common_fixes_analysis-type-inf-null'>common_fixes_analysis type-inf-null</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">infNull</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">ints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="c1">// ignore: non_bool_operand, undefined_operator, return_of_invalid_type_from_closure</span>
  <span class="kd">var</span> <span class="n">maximumOrNull</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="na">fold</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">a</span> <span class="p">&lt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">b</span> <span class="o">:</span> <span class="n">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">infFix</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">ints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="kd">var</span> <span class="n">maximumOrNull</span> <span class="o">=</span>
      <span class="n">ints</span><span class="o">.</span><span class="na">fold</span><span class="p">&lt;</span><span class="kt">int</span><span class="o">?</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">a</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">a</span> <span class="p">&lt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">b</span> <span class="o">:</span> <span class="n">a</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='instantiate-to-bound-sanity'>instantiate-to-bound sanity</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">class</span> <span class="nc">B</span><span class="p">&lt;</span><span class="n">S</span> <span class="kd">extends</span> <span class="kt">int</span><span class="p">,</span> <span class="n">T</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="kd">get</span> <span class="n">typeOfS</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'</span><span class="si">$S</span><span class="s">'</span><span class="p">;</span>
  <span class="kt">String</span> <span class="kd">get</span> <span class="n">typeOfT</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'</span><span class="si">$T</span><span class="s">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">();</span>
  <span class="n">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="na">typeOfS</span><span class="p">);</span> <span class="c1">// int</span>
  <span class="n">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="na">typeOfT</span><span class="p">);</span> <span class="c1">// dynamic</span>
<span class="p">}</span>
</code></pre></div><h1 id='html'>Html</h1><h2 id='queryselector'>querySelector</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Find an element by id (an-id).</span>
  <span class="n">Element</span> <span class="n">idElement</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'#an-id'</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
  <span class="c1">// Find an element by class (a-class).</span>
  <span class="n">Element</span> <span class="n">classElement</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'.a-class'</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
  <span class="c1">// Find all elements by tag (&lt;div&gt;).</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Element</span><span class="p">&gt;</span> <span class="n">divElements</span> <span class="o">=</span> <span class="n">querySelectorAll</span><span class="p">(</span><span class="s">'div'</span><span class="p">);</span>
  <span class="c1">// Find all text inputs.</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Element</span><span class="p">&gt;</span> <span class="n">textInputElements</span> <span class="o">=</span> <span class="n">querySelectorAll</span><span class="p">(</span>
    <span class="s">'input[type="text"]'</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="c1">// Find all elements with the CSS class 'class'</span>
  <span class="c1">// inside of a &lt;p&gt; that is inside an element with</span>
  <span class="c1">// the ID 'id'.</span>
  <span class="kt">List</span><span class="p">&lt;</span><span class="n">Element</span><span class="p">&gt;</span> <span class="n">specialParagraphElements</span> <span class="o">=</span> <span class="n">querySelectorAll</span><span class="p">(</span>
    <span class="s">'#id p.class'</span><span class="p">,</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='attributes'>attributes</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Element</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'#an-id'</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
  <span class="n">elem</span><span class="o">.</span><span class="na">attributes</span><span class="p">[</span><span class="s">'someAttribute'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'someValue'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='creating-elements'>creating-elements</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">ParagraphElement</span><span class="p">();</span>
  <span class="n">elem</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Creating is easy!'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='html-2'>html</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// creating-elements</span>
  <span class="kd">var</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">ParagraphElement</span><span class="p">();</span>
  <span class="n">elem</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Creating is easy!'</span><span class="p">;</span>
  <span class="c1">// creating-from-html</span>
  <span class="kd">var</span> <span class="n">elem2</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="na">html</span><span class="p">(</span>
    <span class="s">'&lt;p&gt;Creating &lt;em&gt;is&lt;/em&gt; easy!&lt;/p&gt;'</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="c1">// body-children-add</span>
  <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">!.</span><span class="na">children</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">elem2</span><span class="p">);</span>
  <span class="c1">// nodes-add</span>
  <span class="n">querySelector</span><span class="p">(</span><span class="s">'#inputs'</span><span class="p">)</span><span class="o">!.</span><span class="na">nodes</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">elem</span><span class="p">);</span>
  <span class="c1">// replaceWith</span>
  <span class="n">querySelector</span><span class="p">(</span><span class="s">'#status'</span><span class="p">)</span><span class="o">!.</span><span class="na">replaceWith</span><span class="p">(</span><span class="n">elem</span><span class="p">);</span>
  <span class="c1">// remove</span>
  <span class="c1">// Find a node by ID, and remove it</span>
  <span class="c1">// from the DOM if it is found.</span>
  <span class="n">querySelector</span><span class="p">(</span><span class="s">'#expendable'</span><span class="p">)</span><span class="o">?.</span><span class="na">remove</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h2 id='classes-add'>classes-add</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'#message'</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
  <span class="n">elem</span><span class="o">.</span><span class="na">classes</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="s">'warning'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='set-id'>set-id</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">message</span> <span class="o">=</span> <span class="n">DivElement</span><span class="p">();</span>
  <span class="n">message</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="s">'message2'</span><span class="p">;</span>
  <span class="n">message</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Please subscribe to the Dart mailing list.'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='elem-set-cascade'>elem-set-cascade</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">message</span> <span class="o">=</span> <span class="n">DivElement</span><span class="p">()</span>
    <span class="p">.</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="s">'message2'</span>
    <span class="p">.</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Please subscribe to the Dart mailing list.'</span><span class="p">;</span>
  <span class="c1">// set-style</span>
  <span class="n">message</span><span class="o">.</span><span class="na">style</span>
    <span class="p">.</span><span class="o">.</span><span class="na">fontWeight</span> <span class="o">=</span> <span class="s">'bold'</span>
    <span class="p">.</span><span class="o">.</span><span class="na">fontSize</span> <span class="o">=</span> <span class="s">'3em'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='onclick'>onClick</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">submitData</span><span class="p">()</span> <span class="p">{}</span>
  <span class="c1">// Find a button by ID and add an event handler.</span>
  <span class="n">querySelector</span><span class="p">(</span><span class="s">'#submitInfo'</span><span class="p">)</span><span class="o">!.</span><span class="na">onClick</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// When the button is clicked, it runs this code.</span>
    <span class="n">submitData</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><h2 id='target'>target</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">!.</span><span class="na">onClick</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">clickedElem</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">target</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><h2 id='try-getstring'>try-getString</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;</span> <span class="n">tryGetString</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">jsonUri</span> <span class="o">=</span> <span class="s">'data.json'</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">url</span> <span class="o">=</span> <span class="s">'https://httpbin.org'</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">getString</span><span class="p">(</span><span class="n">jsonUri</span><span class="p">);</span>
    <span class="kt">String</span> <span class="n">pageHtml</span> <span class="o">=</span> <span class="k">await</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">getString</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>
    <span class="c1">// Process data...</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle exception...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='new-httprequest'>new-HttpRequest</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">encodedData</span> <span class="o">=</span> <span class="s">'encoded data'</span><span class="p">;</span>
  <span class="kd">var</span> <span class="n">url</span> <span class="o">=</span> <span class="s">'random-url'</span><span class="p">;</span>

  <span class="kt">void</span> <span class="n">requestComplete</span><span class="p">(</span><span class="n">HttpRequest</span> <span class="n">req</span><span class="p">)</span> <span class="p">{}</span>
  <span class="kd">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="p">();</span>
  <span class="n">request</span>
    <span class="p">.</span><span class="o">.</span><span class="na">open</span><span class="p">(</span><span class="s">'POST'</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
    <span class="p">.</span><span class="o">.</span><span class="na">onLoadEnd</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">requestComplete</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="o">.</span><span class="na">send</span><span class="p">(</span><span class="n">encodedData</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='href'>href</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">html</span> <span class="o">=</span> <span class="s">'&lt;a id="example" href="/another/example"&gt;link text&lt;/a&gt;'</span><span class="p">;</span>
  <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">!.</span><span class="na">appendHtml</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
  <span class="kd">var</span> <span class="n">anchor</span> <span class="o">=</span> <span class="n">querySelector</span><span class="p">(</span><span class="s">'#example'</span><span class="p">)</span> <span class="k">as</span> <span class="n">AnchorElement</span><span class="p">;</span>
  <span class="n">print</span><span class="p">(</span><span class="n">anchor</span><span class="o">.</span><span class="na">href</span><span class="p">);</span> <span class="c1">// endsWith('/another/example')</span>
  <span class="n">anchor</span><span class="o">.</span><span class="na">href</span> <span class="o">=</span> <span class="s">'https://dart.dev'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id='os-html'>os-html</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">html</span> <span class="o">=</span> <span class="s">'''&lt;!-- In HTML: --&gt;
    &lt;p&gt;
      &lt;span class="linux"&gt;Words for Linux&lt;/span&gt;
      &lt;span class="macos"&gt;Words for Mac&lt;/span&gt;
      &lt;span class="windows"&gt;Words for Windows&lt;/span&gt;
    &lt;/p&gt;'''</span><span class="p">;</span>
  <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">!.</span><span class="na">appendHtml</span><span class="p">(</span><span class="n">html</span><span class="p">);</span>
  <span class="kt">String</span> <span class="n">determineUserOs</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'linux'</span><span class="p">;</span>
  <span class="kd">const</span> <span class="n">osList</span> <span class="o">=</span> <span class="p">[</span><span class="s">'macos'</span><span class="p">,</span> <span class="s">'windows'</span><span class="p">,</span> <span class="s">'linux'</span><span class="p">];</span>
  <span class="kd">final</span> <span class="n">userOs</span> <span class="o">=</span> <span class="n">determineUserOs</span><span class="p">();</span>
  <span class="c1">// For each possible OS...</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">os</span> <span class="k">in</span> <span class="n">osList</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Matches user OS?</span>
    <span class="kt">bool</span> <span class="n">shouldShow</span> <span class="o">=</span> <span class="p">(</span><span class="n">os</span> <span class="o">==</span> <span class="n">userOs</span><span class="p">);</span>
    <span class="c1">// Find all elements with class=os. For example, if</span>
    <span class="c1">// os == 'windows', call querySelectorAll('.windows')</span>
    <span class="c1">// to find all elements with the class "windows".</span>
    <span class="c1">// Note that '.$os' uses string interpolation.</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">elem</span> <span class="k">in</span> <span class="n">querySelectorAll</span><span class="p">(</span><span class="s">'.</span><span class="si">$os</span><span class="s">'</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">hidden</span> <span class="o">=</span> <span class="o">!</span><span class="n">shouldShow</span><span class="p">;</span> <span class="c1">// Show or hide.</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='request'>request</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">url</span> <span class="o">=</span> <span class="s">'https://httpbin.org/headers'</span><span class="p">;</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;</span> <span class="n">request</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="n">HttpRequest</span> <span class="n">req</span> <span class="o">=</span> <span class="k">await</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">request</span><span class="p">(</span>
      <span class="n">url</span><span class="p">,</span>
      <span class="nl">method:</span> <span class="s">'HEAD'</span><span class="p">,</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Successful URL access...</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">request</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h2 id='post'>POST</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">url</span> <span class="o">=</span> <span class="s">'https://httpbin.org/post'</span><span class="p">;</span>
  <span class="kt">String</span> <span class="n">encodeMap</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="na">entries</span>
        <span class="o">.</span><span class="na">map</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span>
            <span class="s">'</span><span class="si">${Uri.encodeComponent(e.key)}</span><span class="s">=</span><span class="si">${Uri.encodeComponent(e.value)}</span><span class="s">'</span><span class="p">)</span>
        <span class="o">.</span><span class="na">join</span><span class="p">(</span><span class="s">'&amp;'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">test</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'dart'</span><span class="o">:</span> <span class="s">'fun'</span><span class="p">,</span> <span class="s">'angular'</span><span class="o">:</span> <span class="s">'productive'</span><span class="p">};</span>
    <span class="kd">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="p">();</span>
    <span class="n">request</span>
      <span class="p">.</span><span class="o">.</span><span class="na">open</span><span class="p">(</span><span class="s">'POST'</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
      <span class="p">.</span><span class="o">.</span><span class="na">setRequestHeader</span><span class="p">(</span>
        <span class="s">'Content-type'</span><span class="p">,</span>
        <span class="s">'application/x-www-form-urlencoded'</span><span class="p">,</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="o">.</span><span class="na">send</span><span class="p">(</span><span class="n">encodeMap</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
    <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="na">onLoadEnd</span><span class="o">.</span><span class="na">first</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Successful URL access...</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='websocket'>WebSocket</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:async'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Logger</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">_log</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="kd">get</span> <span class="n">log</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="na">from</span><span class="p">(</span><span class="n">_log</span><span class="p">);</span>
  <span class="kt">void</span> <span class="n">clear</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_log</span><span class="o">.</span><span class="na">clear</span><span class="p">();</span>
  <span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="kt">Object</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_log</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="na">toString</span><span class="p">());</span>

  <span class="nd">@override</span>
  <span class="kt">String</span> <span class="n">toString</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_log</span><span class="o">.</span><span class="na">join</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">();</span>
  <span class="kd">final</span> <span class="n">print</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="na">print</span><span class="p">;</span> <span class="c1">// shadow global print</span>
  <span class="kd">final</span> <span class="n">wsStream</span> <span class="o">=</span> <span class="n">StreamController</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;();</span>

  <span class="kd">var</span> <span class="n">ws</span> <span class="o">=</span> <span class="n">WebSocket</span><span class="p">(</span><span class="s">'ws://echo.websocket.org'</span><span class="p">);</span>

  <span class="kt">void</span> <span class="n">initWebSocket</span><span class="p">([</span><span class="kt">int</span> <span class="n">retrySeconds</span> <span class="o">=</span> <span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="n">reconnectScheduled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Connecting to websocket'</span><span class="p">);</span>

    <span class="kt">void</span> <span class="n">scheduleReconnect</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">reconnectScheduled</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Timer</span><span class="p">(</span><span class="n">Duration</span><span class="p">(</span><span class="nl">seconds:</span> <span class="n">retrySeconds</span><span class="p">),</span>
                <span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">initWebSocket</span><span class="p">(</span><span class="n">retrySeconds</span> <span class="o">*</span> <span class="mi">2</span><span class="p">));</span>
      <span class="p">}</span>
      <span class="n">reconnectScheduled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">onOpen</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'Connected'</span><span class="p">);</span>
      <span class="n">ws</span><span class="o">.</span><span class="na">send</span><span class="p">(</span><span class="s">'Hello from Dart!'</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onClose</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'Websocket closed, retrying in </span><span class="si">$retrySeconds</span><span class="s"> seconds'</span><span class="p">);</span>
      <span class="n">scheduleReconnect</span><span class="p">();</span>
    <span class="p">});</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onError</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'Error connecting to ws'</span><span class="p">);</span>
      <span class="n">scheduleReconnect</span><span class="p">();</span>
    <span class="p">});</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">.</span><span class="na">listen</span><span class="p">((</span><span class="n">MessageEvent</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'Received message: </span><span class="si">${e.data}</span><span class="s">'</span><span class="p">);</span>
      <span class="n">wsStream</span><span class="o">.</span><span class="na">add</span><span class="p">((</span><span class="s">'Received message'</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="kd">final</span> <span class="n">t</span> <span class="o">=</span> <span class="n">wsStream</span><span class="o">.</span><span class="na">stream</span><span class="o">.</span><span class="na">timeout</span><span class="p">(</span>
    <span class="kd">const</span> <span class="n">Duration</span><span class="p">(</span><span class="nl">seconds:</span> <span class="mi">5</span><span class="p">),</span>
    <span class="nl">onTimeout:</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="s">'Timeout!'</span><span class="p">),</span>
  <span class="p">);</span>

  <span class="c1">// Under heavy loads we don't get a response,</span>
  <span class="c1">// so let's accept the possibility of a timeout.</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">initWebSocket</span><span class="p">();</span>
    <span class="n">t</span><span class="o">.</span><span class="na">first</span><span class="p">;</span> <span class="c1">// 'Received message' || 'Timeout'</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="n">wsStream</span><span class="o">.</span><span class="na">close</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h1 id='create-libraries'>Create Libraries</h1><div class="highlight"><pre class="highlight plaintext"><code>lib
 ├── hw_mp.dart
 └── src
     ├── hw_html.dart
     ├── hw_io.dart
     └── hw_none.dart
</code></pre></div>
<blockquote>
<p>lib/hw_mp.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">/// A multi-platform Hello World library.</span>
<span class="kn">library</span> <span class="n">hw_mp</span><span class="o">;</span>

<span class="c1">// #docregion export</span>
<span class="kn">export</span> <span class="s">'src/hw_none.dart'</span> <span class="c1">// Stub implementation</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dart</span><span class="o">.</span><span class="na">library</span><span class="o">.</span><span class="na">io</span><span class="p">)</span> <span class="s">'src/hw_io.dart'</span> <span class="c1">// dart:io implementation</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">dart</span><span class="o">.</span><span class="na">library</span><span class="o">.</span><span class="na">html</span><span class="p">)</span> <span class="s">'src/hw_html.dart'</span><span class="o">;</span> <span class="c1">// dart:html implementation</span>
</code></pre></div>
<blockquote>
<p>lib/src/hw_html.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">alarm</span><span class="p">([</span><span class="kt">String</span><span class="o">?</span> <span class="n">text</span><span class="p">])</span> <span class="p">{</span>
  <span class="n">window</span><span class="o">.</span><span class="na">alert</span><span class="p">(</span><span class="n">text</span> <span class="o">??</span> <span class="n">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">String</span> <span class="kd">get</span> <span class="n">message</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'Hello World from JavaScript!'</span><span class="p">;</span>
</code></pre></div>
<blockquote>
<p>lib/src/hw_io.dart</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">alarm</span><span class="p">([</span><span class="kt">String</span><span class="o">?</span> <span class="n">text</span><span class="p">])</span> <span class="p">{</span>
  <span class="n">stderr</span><span class="o">.</span><span class="na">writeln</span><span class="p">(</span><span class="n">text</span> <span class="o">??</span> <span class="n">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">String</span> <span class="kd">get</span> <span class="n">message</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'Hello World from the VM!'</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">alarm</span><span class="p">([</span><span class="kt">String</span><span class="o">?</span> <span class="n">text</span><span class="p">])</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">UnsupportedError</span><span class="p">(</span><span class="s">'hw_none alarm'</span><span class="p">);</span>

<span class="kt">String</span> <span class="kd">get</span> <span class="n">message</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">UnsupportedError</span><span class="p">(</span><span class="s">'hw_none message'</span><span class="p">);</span>
</code></pre></div><h1 id='iterables'>Iterables</h1><h2 id='any'>any</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">any</span><span class="p">(</span><span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">items</span><span class="p">,</span> <span class="kt">Function</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span> <span class="n">print</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="na">any</span><span class="p">((</span><span class="n">item</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">item</span><span class="o">.</span><span class="na">contains</span><span class="p">(</span><span class="s">'Z'</span><span class="p">)))</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'At least one item contains "Z"'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'No item contains "Z"'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Zoo'</span><span class="p">,</span> <span class="s">'Home'</span><span class="p">];</span>
  <span class="n">any</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div><h2 id='every'>every</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">bool</span> <span class="nf">bad</span><span class="p">(</span><span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">item</span> <span class="k">in</span> <span class="n">items</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">good</span><span class="p">(</span><span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">items</span><span class="o">.</span><span class="na">every</span><span class="p">((</span><span class="n">item</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span><span class="o">=</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="n">good</span><span class="p">([</span><span class="s">'12345'</span><span class="p">]));</span> <span class="c1">// true</span>
<span class="p">}</span>
</code></pre></div><h2 id='any-every'>any-every</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Salad'</span><span class="p">,</span> <span class="s">'Popcorn'</span><span class="p">,</span> <span class="s">'Toast'</span><span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="na">any</span><span class="p">((</span><span class="n">item</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">item</span><span class="o">.</span><span class="na">contains</span><span class="p">(</span><span class="s">'a'</span><span class="p">)))</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'At least one item contains "a"'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="na">every</span><span class="p">((</span><span class="n">item</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span><span class="o">=</span> <span class="mi">5</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'All items have length &gt;= 5'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='firstwhere'>firstWhere</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'123456'</span><span class="p">,</span> <span class="s">'abcdef'</span><span class="p">];</span>
  <span class="kt">String</span> <span class="n">element</span> <span class="o">=</span> <span class="n">iterable</span><span class="o">.</span><span class="na">firstWhere</span><span class="p">((</span><span class="n">element</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">element</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span> <span class="mi">5</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">element</span><span class="p">);</span> <span class="c1">// 123456</span>
<span class="p">}</span>
</code></pre></div><h2 id='first-where-long'>first-where-long</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">bool</span> <span class="nf">predicate</span><span class="p">(</span><span class="kt">String</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Salad'</span><span class="p">,</span> <span class="s">'Popcorn'</span><span class="p">,</span> <span class="s">'Toast'</span><span class="p">,</span> <span class="s">'Lasagne'</span><span class="p">];</span>
  <span class="c1">// You can find with a simple expression:</span>
  <span class="kd">var</span> <span class="n">foundItem1</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="na">firstWhere</span><span class="p">((</span><span class="n">item</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span> <span class="mi">5</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">foundItem1</span><span class="p">);</span> <span class="c1">// Popcorn</span>

  <span class="c1">// Or try using a function block:</span>
  <span class="kd">var</span> <span class="n">foundItem2</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="na">firstWhere</span><span class="p">((</span><span class="n">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span> <span class="mi">5</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="n">print</span><span class="p">(</span><span class="n">foundItem2</span><span class="p">);</span> <span class="c1">// Popcorn</span>

  <span class="c1">// Or even pass in a function reference:</span>
  <span class="kd">var</span> <span class="n">foundItem3</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="na">firstWhere</span><span class="p">(</span><span class="n">predicate</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">foundItem3</span><span class="p">);</span> <span class="c1">// Popcorn</span>

  <span class="c1">// You can also use an `orElse` function in case no value is found!</span>
  <span class="kd">var</span> <span class="n">foundItem4</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="na">firstWhere</span><span class="p">(</span>
    <span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">item</span><span class="o">.</span><span class="na">length</span> <span class="p">&gt;</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nl">orElse:</span> <span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'None!'</span><span class="p">,</span>
  <span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">foundItem4</span><span class="p">);</span> <span class="c1">// None!</span>
<span class="p">}</span>
</code></pre></div><h2 id='elementat'>elementAt</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">iterable</span><span class="o">.</span><span class="na">elementAt</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">value</span><span class="p">);</span> <span class="c1">// 2</span>
<span class="p">}</span>
</code></pre></div><h2 id='map-int'>map-int</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">output</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">map</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">e</span> <span class="o">*</span> <span class="mi">10</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">output</span><span class="p">);</span> <span class="c1">// (10, 20, 30)</span>
<span class="p">}</span>
</code></pre></div><h2 id='map-string'>map-string</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
  <span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">output</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">map</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="p">());</span>
  <span class="n">print</span><span class="p">(</span><span class="n">output</span><span class="p">);</span> <span class="c1">// (1, 2, 3)</span>
<span class="p">}</span>
</code></pre></div><h2 id='take-while'>take-while</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
  <span class="kd">var</span> <span class="n">numbersUntilNegative</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">takeWhile</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="o">!</span><span class="n">e</span><span class="o">.</span><span class="na">isNegative</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="n">numbersUntilNegative</span><span class="p">);</span> <span class="c1">// (1, 2, 3)</span>
<span class="p">}</span>
</code></pre></div><h2 id='take-while-long-skipwhile'>take-while-long skipWhile</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
  <span class="kd">var</span> <span class="n">numbersUntilZero</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">takeWhile</span><span class="p">((</span><span class="n">number</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Numbers until 0: </span><span class="si">$numbersUntilZero</span><span class="s">'</span><span class="p">);</span> <span class="c1">// (1, 3, -2)</span>

  <span class="kd">var</span> <span class="n">numbersStartingAtZero</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">skipWhile</span><span class="p">((</span><span class="n">number</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span><span class="o">!=</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'Numbers starting at 0: </span><span class="si">$numbersStartingAtZero</span><span class="s">'</span><span class="p">);</span> <span class="c1">// (0, 4, 5)</span>
<span class="p">}</span>
</code></pre></div><h2 id='where-2'>where</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
  <span class="kd">var</span> <span class="n">evenNumbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">where</span><span class="p">((</span><span class="n">number</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">number</span> <span class="k">in</span> <span class="n">evenNumbers</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$number</span><span class="s"> is even'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='for-in'>for-in</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Salad'</span><span class="p">,</span> <span class="s">'Popcorn'</span><span class="p">,</span> <span class="s">'Toast'</span><span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">element</span> <span class="k">in</span> <span class="n">iterable</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">element</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='first-last'>first-last</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Iterable</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">iterable</span> <span class="o">=</span> <span class="kd">const</span> <span class="p">[</span><span class="s">'Salad'</span><span class="p">,</span> <span class="s">'Popcorn'</span><span class="p">,</span> <span class="s">'Toast'</span><span class="p">];</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'The first element is </span><span class="si">${iterable.first}</span><span class="s">'</span><span class="p">);</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'The last element is </span><span class="si">${iterable.last}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='numbers-where'>numbers-where</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="n">evenNumbers</span> <span class="o">=</span> <span class="kd">const</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span><span class="o">.</span><span class="na">where</span><span class="p">((</span><span class="n">number</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span><span class="o">.</span><span class="na">isEven</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">number</span> <span class="k">in</span> <span class="n">evenNumbers</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$number</span><span class="s"> is even.'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">evenNumbers</span><span class="o">.</span><span class="na">any</span><span class="p">((</span><span class="n">number</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span><span class="o">.</span><span class="na">isNegative</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'evenNumbers contains negative numbers.'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// If no element satisfies the predicate, the output is empty.</span>
  <span class="kd">var</span> <span class="n">largeNumbers</span> <span class="o">=</span> <span class="n">evenNumbers</span><span class="o">.</span><span class="na">where</span><span class="p">((</span><span class="n">number</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">number</span> <span class="p">&gt;</span> <span class="mi">1000</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">largeNumbers</span><span class="o">.</span><span class="na">isEmpty</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'largeNumbers is empty!'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h1 id='function'>Function</h1><h2 id='pass-function'>pass function</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>

<span class="kd">typedef</span> <span class="n">Hello</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="o">=</span> <span class="kt">void</span> <span class="kt">Function</span><span class="p">(</span><span class="n">T</span> <span class="n">value</span><span class="p">);</span>

<span class="kd">class</span> <span class="nc">PassFunction</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">PassFunction</span><span class="p">({</span><span class="k">super</span><span class="o">.</span><span class="na">key</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">onTest</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">hello</span><span class="p">});</span>

  <span class="kd">final</span> <span class="kt">Function</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">onTest</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">Hello</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">hello</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">OutlinedButton</span><span class="p">(</span>
      <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">onTest</span><span class="p">(</span><span class="mi">512</span><span class="p">);</span>
        <span class="n">hello</span><span class="p">(</span><span class="s">'你好'</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nl">child:</span> <span class="kd">const</span> <span class="n">Text</span><span class="p">(</span><span class="s">'click'</span><span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="n">App</span><span class="p">({</span><span class="k">super</span><span class="o">.</span><span class="na">key</span><span class="p">});</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="nl">home:</span> <span class="n">Scaffold</span><span class="p">(</span>
        <span class="nl">body:</span> <span class="n">PassFunction</span><span class="p">(</span>
          <span class="nl">onTest:</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">);</span> <span class="c1">// 512</span>
          <span class="p">},</span>
          <span class="nl">hello:</span> <span class="p">(</span><span class="kt">String</span> <span class="n">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">print</span><span class="p">(</span><span class="n">text</span><span class="p">);</span> <span class="c1">// 你好</span>
          <span class="p">},</span>
        <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">runApp</span><span class="p">(</span><span class="kd">const</span> <span class="n">App</span><span class="p">());</span>
</code></pre></div><h1 id='future'>Future</h1><h2 id='long-chain'>long-chain</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">one</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'from one'</span><span class="p">);</span>
<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">two</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">error</span><span class="p">(</span><span class="s">'error from two'</span><span class="p">);</span>
<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">three</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'from three'</span><span class="p">);</span>
<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">four</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'from four'</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">one</span><span class="p">()</span> <span class="c1">// Future completes with "from one".</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">two</span><span class="p">())</span> <span class="c1">// Future completes with two()'s error.</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">three</span><span class="p">())</span> <span class="c1">// Future completes with two()'s error.</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">four</span><span class="p">())</span> <span class="c1">// Future completes with two()'s error.</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">value</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">value</span><span class="o">.</span><span class="na">length</span><span class="p">)</span> <span class="c1">// Future completes with two()'s error.</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Got error: </span><span class="si">$e</span><span class="s">'</span><span class="p">);</span> <span class="c1">// Finally, callback fires.</span>
    <span class="k">return</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// Future completes with 42.</span>
  <span class="p">})</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'The value is </span><span class="si">$value</span><span class="s">'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Output of this program:</span>
<span class="c1">//   Got error: error from two</span>
<span class="c1">//   The value is 42</span>

</code></pre></div><h2 id='then-catch'>then-catch</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">myFunc</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'42'</span><span class="p">);</span>

<span class="kt">String</span> <span class="nf">processValue</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">'value'</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">myFunc</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">(</span><span class="n">processValue</span><span class="p">)</span><span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='comprehensive-errors'>comprehensive-errors</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">myFunc</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'42'</span><span class="p">);</span>

<span class="kt">String</span> <span class="nf">doSomethingWith</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">'value'</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">Never</span> <span class="n">ellipsis</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'!'</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">myFunc</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">doSomethingWith</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="n">ellipsis</span><span class="p">();</span> <span class="c1">// 抛出异常</span>
    <span class="c1">// 下面代码不会被执行</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Some arbitrary error'</span><span class="p">);</span>
  <span class="p">})</span><span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='throws-then-catch'>throws-then-catch</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">asyncErrorFunction</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Threw an exception'</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">anotherAsyncErrorFunction</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Also threw an exception'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">Object</span> <span class="nf">successCallback</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">value</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">''</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">asyncErrorFunction</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">(</span><span class="n">successCallback</span><span class="p">,</span> <span class="nl">onError:</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">handleError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span> <span class="c1">// Original error. 显示捕获异常，不然后面的 catchError 不会再捕获</span>
    <span class="n">anotherAsyncErrorFunction</span><span class="p">();</span> <span class="c1">// Oops, new error.</span>
  <span class="p">})</span><span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">);</span> <span class="c1">// Error from within then() handled.</span>
<span class="p">}</span>
<span class="c1">// Exception: Threw an exception</span>
<span class="c1">// Exception: Also threw an exception</span>
</code></pre></div><h2 id='connect-server'>connect-server</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">handleResponse</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'Response'</span><span class="p">);</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">dynamic</span> <span class="n">connectToServer</span><span class="p">()</span> <span class="p">{}</span>
  <span class="kd">const</span> <span class="n">myUrl</span> <span class="o">=</span> <span class="s">'https://dart.dev'</span><span class="p">;</span>

  <span class="kd">final</span> <span class="n">server</span> <span class="o">=</span> <span class="n">connectToServer</span><span class="p">();</span>
  <span class="n">server</span>
      <span class="o">.</span><span class="na">post</span><span class="p">(</span><span class="n">myUrl</span><span class="p">,</span> <span class="nl">fields:</span> <span class="kd">const</span> <span class="p">{</span><span class="s">'name'</span><span class="o">:</span> <span class="s">'Dash'</span><span class="p">,</span> <span class="s">'profession'</span><span class="o">:</span> <span class="s">'mascot'</span><span class="p">})</span>
      <span class="o">.</span><span class="na">then</span><span class="p">(</span><span class="n">handleResponse</span><span class="p">)</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">)</span>
      <span class="o">.</span><span class="na">whenComplete</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="na">close</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='future-then-amp-future-catch-error'>future-then &amp; future-catch-error</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">FakeFuture</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="n">R</span><span class="p">&gt;</span> <span class="n">then</span><span class="p">&lt;</span><span class="n">R</span><span class="p">&gt;(</span><span class="n">FutureOr</span><span class="p">&lt;</span><span class="n">R</span><span class="p">&gt;</span> <span class="kt">Function</span><span class="p">(</span><span class="n">T</span> <span class="n">value</span><span class="p">)</span> <span class="n">onValue</span><span class="p">,</span> <span class="p">{</span><span class="kt">Function</span><span class="o">?</span> <span class="n">onError</span><span class="p">});</span>

  <span class="n">Future</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">catchError</span><span class="p">(</span><span class="kt">Function</span> <span class="n">onError</span><span class="p">,</span> <span class="p">{</span><span class="kt">bool</span> <span class="kt">Function</span><span class="p">(</span><span class="kt">Object</span> <span class="n">error</span><span class="p">)</span><span class="o">?</span> <span class="n">test</span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>test 返回值为 true，onError 才会执行：</p>
</blockquote>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Future</span><span class="o">.</span><span class="na">delayed</span><span class="p">(</span>
    <span class="kd">const</span> <span class="n">Duration</span><span class="p">(</span><span class="nl">seconds:</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="mi">401</span><span class="p">,</span>
  <span class="p">)</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="s">'Unreachable'</span><span class="p">;</span>
  <span class="p">})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Error: </span><span class="si">$err</span><span class="s">'</span><span class="p">);</span> <span class="c1">// Prints 401.</span>
  <span class="p">},</span> <span class="nl">test:</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">error</span> <span class="k">is</span> <span class="kt">int</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="p">&gt;</span><span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><h2 id='26b238cb1d'>注意事项</h2>
<p>以下代码会抛出异常 <code>ArgumentError</code>：<code>Invalid argument(s) (onError): The error handler of Future.catchError must return a value of the future&#39;s type</code>，因为编译器推断 <code>then()</code> 的返回值类型是 <code>Future&lt;Never&gt;</code> 或 <code>Future&lt;Null&gt;</code>，然而真正的返回类型并不如此。</p>

<p>修改方法：<code>then()</code> 添加返回类型 <code>void</code>，告诉编译器无返回值。</p>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// error</span>
  <span class="n">Future</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'1'</span><span class="p">);</span>
  <span class="p">})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">error</span><span class="p">,</span> <span class="n">stackTrace</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$error</span><span class="s">, </span><span class="si">$stackTrace</span><span class="s">'</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="c1">// error</span>
  <span class="n">File</span><span class="p">(</span><span class="s">"foo.txt"</span><span class="p">)</span><span class="o">.</span><span class="na">readAsString</span><span class="p">()</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="c1">// ok</span>
  <span class="n">Future</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="na">then</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;((</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'1'</span><span class="p">);</span>
  <span class="p">})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">error</span><span class="p">,</span> <span class="n">stackTrace</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">$error</span><span class="s">, </span><span class="si">$stackTrace</span><span class="s">'</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="c1">// ok</span>
  <span class="n">File</span><span class="p">(</span><span class="s">"foo.txt"</span><span class="p">)</span><span class="o">.</span><span class="na">readAsString</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;((</span><span class="n">value</span><span class="p">)</span> <span class="p">{})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p>另外也可是使用 <code>try-catch</code>。</p>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">File</span><span class="p">(</span><span class="s">"foo.txt"</span><span class="p">)</span><span class="o">.</span><span class="na">readAsString</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='auth-response'>auth-response</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:async'</span><span class="o">;</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">handleAuthResponse</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'Response'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleFormatException</span><span class="p">(</span><span class="kt">Object</span> <span class="n">exception</span><span class="p">)</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">handleAuthorizationException</span><span class="p">(</span><span class="kt">Object</span> <span class="n">exception</span><span class="p">)</span> <span class="p">{}</span>

<span class="kd">class</span> <span class="nc">AuthorizationException</span> <span class="kd">implements</span> <span class="n">Exception</span> <span class="p">{}</span>

<span class="kt">Never</span> <span class="n">ellipsis</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">AuthorizationException</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">handleAuthResponse</span><span class="p">(</span><span class="kd">const</span> <span class="p">{</span><span class="s">'username'</span><span class="o">:</span> <span class="s">'dash'</span><span class="p">,</span> <span class="s">'age'</span><span class="o">:</span> <span class="mi">3</span><span class="p">})</span>
      <span class="o">.</span><span class="na">then</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;((</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">ellipsis</span><span class="p">())</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleFormatException</span><span class="p">,</span> <span class="nl">test:</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">e</span> <span class="k">is</span> <span class="n">FormatException</span><span class="p">)</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleAuthorizationException</span><span class="p">,</span> <span class="c1">// go to this branch</span>
          <span class="nl">test:</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">e</span> <span class="k">is</span> <span class="n">AuthorizationException</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='early-error-handler'>early error handler</h2>
<p>以下代码，捕获异常比抛出异常推迟 500 ms，所以不能捕获异常。</p>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">asyncErrorFunction</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'1'</span><span class="p">);</span>

  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">asyncErrorFunction</span><span class="p">();</span> <span class="c1">// 已经抛出</span>

  <span class="c1">// BAD: Too late to handle asyncErrorFunction() exception.</span>
  <span class="n">Future</span><span class="o">.</span><span class="na">delayed</span><span class="p">(</span><span class="kd">const</span> <span class="n">Duration</span><span class="p">(</span><span class="nl">milliseconds:</span> <span class="mi">500</span><span class="p">),</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">future</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'e'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p>正确做法是，<code>Future().then().catchError()</code> 写在一起。</p>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">asyncErrorFunction</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Threw an exception'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">Future</span><span class="o">.</span><span class="na">delayed</span><span class="p">(</span><span class="kd">const</span> <span class="n">Duration</span><span class="p">(</span><span class="nl">milliseconds:</span> <span class="mi">500</span><span class="p">),</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">asyncErrorFunction</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s">'e'</span><span class="p">);</span> <span class="c1">// ok</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><h2 id='when-complete'>when complete</h2><h3 id='with-error'>with-error</h3><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">asyncErrorFunction</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Threw an exception'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">asyncErrorFunction</span><span class="p">()</span>
      <span class="c1">// Future completes with an error:</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s">"Won't reach here"</span><span class="p">))</span>
      <span class="c1">// Future completes with the same error:</span>
      <span class="o">.</span><span class="na">whenComplete</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s">'Reaches here'</span><span class="p">))</span>
      <span class="c1">// Future completes with the same error:</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s">"Won't reach here"</span><span class="p">))</span>
      <span class="c1">// Error is handled here:</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h3 id='with-object'>with-object</h3><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">Never</span> <span class="n">ellipsis</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'!'</span><span class="p">);</span>
<span class="kd">final</span> <span class="kt">Never</span> <span class="n">someObject</span> <span class="o">=</span> <span class="n">ellipsis</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">asyncErrorFunction</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Threw an exception'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">printErrorMessage</span><span class="p">()</span> <span class="p">{}</span>

  <span class="n">asyncErrorFunction</span><span class="p">()</span>
      <span class="c1">// Future completes with an error:</span>
      <span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{})</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">handleError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="n">printErrorMessage</span><span class="p">();</span>
    <span class="c1">// Future completes with someObject</span>
    <span class="k">return</span> <span class="n">someObject</span><span class="p">;</span>
  <span class="p">})</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="p">})</span><span class="o">.</span><span class="na">whenComplete</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s">'Done!'</span><span class="p">));</span>
  <span class="c1">// Future completes with someObject</span>
<span class="p">}</span>
</code></pre></div><h3 id='when-complete-error'>when-complete-error</h3><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">Object</span><span class="p">&gt;</span> <span class="n">asyncErrorFunction</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'Threw an exception'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">handleError</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">asyncErrorFunction</span><span class="p">()</span>
      <span class="c1">// Future completes with a value:</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">)</span>
      <span class="c1">// Future completes with an error:</span>
      <span class="o">.</span><span class="na">whenComplete</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'New error'</span><span class="p">))</span>
      <span class="c1">// Error is handled:</span>
      <span class="o">.</span><span class="na">catchError</span><span class="p">(</span><span class="n">handleError</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id='sync'>sync</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>

<span class="kt">String</span> <span class="nf">obtainFilename</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">'file name'</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">parseFileData</span><span class="p">(</span><span class="kt">String</span> <span class="n">contents</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="mi">42</span><span class="p">;</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">parseAndRead</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">obtainFilename</span><span class="p">(</span><span class="n">data</span><span class="p">);</span> <span class="c1">// Could throw.</span>
  <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">readAsString</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">contents</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">parseFileData</span><span class="p">(</span><span class="n">contents</span><span class="p">);</span> <span class="c1">// Could throw.</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">parseAndRead1</span><span class="p">(</span><span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">sync</span><span class="p">(()</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">obtainFilename</span><span class="p">(</span><span class="n">data</span><span class="p">);</span> <span class="c1">// Could throw.</span>
    <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">readAsString</span><span class="p">()</span><span class="o">.</span><span class="na">then</span><span class="p">((</span><span class="n">contents</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">parseFileData</span><span class="p">(</span><span class="n">contents</span><span class="p">);</span> <span class="c1">// Could throw.</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">Map</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="n">parseAndRead</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="na">catchError</span><span class="p">((</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Inside catchError'</span><span class="p">);</span>
    <span class="n">print</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="c1">// Inside catchError</span>
  <span class="c1">// PathNotFoundException: Cannot open file,</span>
  <span class="c1">// path = 'file name' (OS Error: No such file</span>
  <span class="c1">// or directory, errno = 2)</span>
<span class="p">}</span>

<span class="kt">Never</span> <span class="n">ellipsis</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'!'</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">someFunc</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="mi">42</span><span class="p">;</span>

<span class="kt">Function</span> <span class="nf">fragileFunc</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">sync</span><span class="p">(()</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">x</span> <span class="o">=</span> <span class="n">someFunc</span><span class="p">();</span> <span class="c1">// Unexpectedly throws in some rare cases.</span>
    <span class="kd">var</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// x should not equal 0.</span>
    <span class="n">ellipsis</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div><h2 id='delayed'>delayed</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="k">await</span> <span class="n">Future</span><span class="o">.</span><span class="na">delayed</span><span class="p">(</span><span class="n">Duration</span><span class="p">(</span><span class="nl">milliseconds:</span> <span class="mi">1000</span><span class="p">));</span>
  <span class="n">print</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h1 id='utils'>Utils</h1><h2 id='a-simple-logger'>A simple logger</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="c1">/// A simple logger</span>
<span class="kd">class</span> <span class="nc">Logger</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">_log</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="kd">get</span> <span class="n">log</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="na">from</span><span class="p">(</span><span class="n">_log</span><span class="p">);</span>
  <span class="kt">void</span> <span class="n">clear</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_log</span><span class="o">.</span><span class="na">clear</span><span class="p">();</span>
  <span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="kt">Object</span> <span class="n">o</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_log</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="na">toString</span><span class="p">());</span>

  <span class="nd">@override</span>
  <span class="kt">String</span> <span class="n">toString</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_log</span><span class="o">.</span><span class="na">join</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h1 id='async'>async</h1><h2 id='e873fcf64e'>以下三个函数有何区别？</h2><div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">String</span> <span class="nf">processValue</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">'value'</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">processValue1</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">value</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">processValue2</span><span class="p">(</span><span class="kd">dynamic</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">Future</span><span class="o">.</span><span class="na">value</span><span class="p">(</span><span class="s">'value'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>函数 <code>processValue</code> 和 <code>processValue2</code> 相同，它们都是同步操作，<code>Future</code> 可有可无。函数 <code>processValue1</code> 因为使用了 <code>async</code>，所以是异步操作，必须返回 <code>Future</code>。</p>
<h1 id='questions'>Questions</h1><h2 id='never'>Never 是什么？</h2>
<p>Never 是 Dart 中的一个类型，表示没有值。它通常用于表示不可能返回的函数的返回类型。比如函数中途一定会抛出异常的函数。</p>
<div class="highlight"><pre class="highlight dart tab-dart"><code><span class="kt">Never</span> <span class="n">ellipsis</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">'!'</span><span class="p">);</span>
</code></pre></div><h2 id='dart-dynamic-object'>Dart 中 dynamic 和 Object 有何区别？</h2>
<p>在 Dart 中，<code>dynamic</code> 和 <code>Object</code> 都是类型。<code>dynamic</code> 类型是动态类型，这意味着它可以存储任何类型的值。<code>Object</code> 类型是静态类型，这意味着它只能存储 <code>Object</code> 及其子类的值。</p>

<p><code>dynamic</code> 类型通常用于在编译时不知道值类型的场合。例如，以下代码将 <code>dynamic</code> 类型变量 <code>x</code> 初始化为一个字符串：</p>
<div class="highlight"><pre class="highlight plaintext"><code>dynamic x = 'Hello World!';
</code></pre></div>
<p><code>Object</code> 类型通常用于在编译时知道值类型的场合。例如，以下代码将 <code>Object</code> 类型变量 <code>y</code> 初始化为一个字符串：</p>
<div class="highlight"><pre class="highlight plaintext"><code>Object y = 'Hello World!';
</code></pre></div>
<p><code>dynamic</code> 类型比 <code>Object</code> 类型更灵活，但也更不安全。使用 <code>dynamic</code> 类型时，编译器无法检查类型错误，这可能会导致错误。使用 <code>Object</code> 类型时，编译器可以检查类型错误，这有助于确保程序的安全性。</p>

<p>一般来说，在 Dart 中使用 <code>Object</code> 类型而不是 <code>dynamic</code> 类型是更好的做法。但是，在编译时不知道值类型的场合，使用 <code>dynamic</code> 类型是有意义的。</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="dart">dart</a>
          </div>
      </div>
    </div>
  </body>
</html>
